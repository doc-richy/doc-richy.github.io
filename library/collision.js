function g(t,e){let i,a,r,d,n,y,x,h,l;return"rectangle"===(i=e.radius?"circle":"rectangle")&&(a=e.x,r=e.x+e.width,d=e.y,n=e.y+e.height,l=t.x>a&&t.x<r&&t.y>d&&t.y<n),"circle"===i&&(y=t.x-e.centerX,x=t.y-e.centerY,h=Math.sqrt(y*y+x*x),l=h<e.radius),l}function o(t,e,i=!1){let a,r;return r=i?(a=e.gx+e.radius-(t.gx+t.radius),e.gy+e.radius-(t.gy+t.radius)):(a=e.centerX-t.centerX,e.centerY-t.centerY),Math.sqrt(a*a+r*r)<t.radius+e.radius}function u(t,e,i=!1,a=!1){let r,d,n,y,x,h,l,g={},o=!1;var u,f,s;return x=a?(y=e.gx+e.radius-(t.gx+t.radius),e.gy+e.radius-(t.gy+t.radius)):(y=e.centerX-t.centerX,e.centerY-t.centerY),(r=Math.sqrt(y*y+x*x))<(d=t.radius+e.radius)&&(o=!0,n=d-r,n+=.3,h=y/r,l=x/r,t.x-=n*h,t.y-=n*l,i)&&(g.x=x,g.y=-y,a=t,e=g,i={},t={},f={},s=a.mass||1,e.lx=e.y,e.ly=-e.x,e.magnitude=Math.sqrt(e.x*e.x+e.y*e.y),e.dx=e.x/e.magnitude,e.dy=e.y/e.magnitude,u=a.vx*e.dx+a.vy*e.dy,i.vx=u*e.dx,i.vy=u*e.dy,u=a.vx*(e.lx/e.magnitude)+a.vy*(e.ly/e.magnitude),t.vx=u*(e.lx/e.magnitude),t.vy=u*(e.ly/e.magnitude),t.vx*=-1,t.vy*=-1,f.x=i.vx+t.vx,f.y=i.vy+t.vy,a.vx=f.x/s,a.vy=f.y/s),o}function f(t,e,i=!1){let a,r,d,n,y={},x={},h={},l={},g={},o=!1;return t.mass=t.mass||1,e.mass=e.mass||1,i?(y.vx=e.gx+e.radius-(t.gx+t.radius),y.vy=e.gy+e.radius-(t.gy+t.radius)):(y.vx=e.centerX-t.centerX,y.vy=e.centerY-t.centerY),y.magnitude=Math.sqrt(y.vx*y.vx+y.vy*y.vy),a=t.radius+e.radius,y.magnitude<a&&(o=!0,r=a-y.magnitude,r+=.3,y.dx=y.vx/y.magnitude,y.dy=y.vy/y.magnitude,y.vxHalf=Math.abs(y.dx*r/2),y.vyHalf=Math.abs(y.dy*r/2),d=t.x>e.x?1:-1,n=t.y>e.y?1:-1,t.x=t.x+y.vxHalf*d,t.y=t.y+y.vyHalf*n,e.x=e.x+y.vxHalf*-d,e.y=e.y+y.vyHalf*-n,y.lx=y.vy,y.ly=-y.vx,i=t.vx*y.dx+t.vy*y.dy,x.x=i*y.dx,x.y=i*y.dy,i=t.vx*(y.lx/y.magnitude)+t.vy*(y.ly/y.magnitude),h.x=y.lx/y.magnitude*i,h.y=y.ly/y.magnitude*i,i=e.vx*y.dx+e.vy*y.dy,l.x=i*y.dx,l.y=i*y.dy,i=e.vx*(y.lx/y.magnitude)+e.vy*(y.ly/y.magnitude),g.x=y.lx/y.magnitude*i,g.y=y.ly/y.magnitude*i,t.bounce={},t.bounce.x=h.x+l.x,t.bounce.y=h.y+l.y,e.bounce={},e.bounce.x=x.x+g.x,e.bounce.y=x.y+g.y,t.vx=t.bounce.x/t.mass,t.vy=t.bounce.y/t.mass,e.vx=e.bounce.x/e.mass,e.vy=e.bounce.y/e.mass),o}function t(i,a=!1){for(let e=0;e<i.length;e++){var r=i[e];for(let t=e+1;t<i.length;t++)f(r,i[t],a)}}function s(t,e,i=!1){let a,r,d,n,y;return a=!1,y=i?(n=t.gx+t.halfWidth-(e.gx+e.halfWidth),t.gy+t.halfHeight-(e.gy+e.halfHeight)):(n=t.centerX-e.centerX,t.centerY-e.centerY),r=t.halfWidth+e.halfWidth,d=t.halfHeight+e.halfHeight,a=Math.abs(n)<r&&Math.abs(y)<d}function c(t,e,i=!1,a=!0){let r,d,n,y,x,h,l;return l=a?(h=t.gx+t.halfWidth-(e.gx+e.halfWidth),t.gy+t.halfHeight-(e.gy+e.halfHeight)):(h=t.centerX-e.centerX,t.centerY-e.centerY),d=t.halfWidth+e.halfWidth,n=t.halfHeight+e.halfHeight,Math.abs(h)<d&&Math.abs(l)<n&&(y=d-Math.abs(h),(x=n-Math.abs(l))<=y?(0<l?(r="top",t.y=t.y+x):(r="bottom",t.y=t.y-x),i&&(t.vy*=-1)):(0<h?(r="left",t.x=t.x+y):(r="right",t.x=t.x-y),i&&(t.vx*=-1))),r}function v(t,e,i=!1){let a,r,d,n,y,x;if(x=i?(d=t.gx,n=t.gy,y=e.gx,e.gy):(d=t.x,n=t.y,y=e.x,e.y),"topMiddle"===(a=n<x-e.halfHeight?d<y-1-e.halfWidth?"topLeft":d>y+1+e.halfWidth?"topRight":"topMiddle":n>x+e.halfHeight?d<y-1-e.halfWidth?"bottomLeft":d>y+1+e.halfWidth?"bottomRight":"bottomMiddle":d<y-e.halfWidth?"leftMiddle":"rightMiddle")||"bottomMiddle"===a||"leftMiddle"===a||"rightMiddle"===a)r=s(t,e,i);else{var h={};switch(a){case"topLeft":h.x=y,h.y=x;break;case"topRight":h.x=y+e.width,h.y=x;break;case"bottomLeft":h.x=y,h.y=x+e.height;break;case"bottomRight":h.x=y+e.width,h.y=x+e.height}r=l(t,h,i)}return r&&a}function l(t,e,i=!1){return e.diameter=1,e.radius=.5,e.centerX=e.x,e.centerY=e.y,e.gx=e.x,e.gy=e.y,o(t,e,i)}function m(t,e,i=!1,a=!1){let r,d,n,y,x,h;if(h=a?(n=t.gx,y=t.gy,x=e.gx,e.gy):(n=t.x,y=t.y,x=e.x,e.y),"topMiddle"===(r=y<h-e.halfHeight?n<x-1-e.halfWidth?"topLeft":n>x+1+e.halfWidth?"topRight":"topMiddle":y>h+e.halfHeight?n<x-1-e.halfWidth?"bottomLeft":n>x+1+e.halfWidth?"bottomRight":"bottomMiddle":n<x-e.halfWidth?"leftMiddle":"rightMiddle")||"bottomMiddle"===r||"leftMiddle"===r||"rightMiddle"===r)d=c(t,e,i,a);else{var l={};switch(r){case"topLeft":l.x=x,l.y=h;break;case"topRight":l.x=x+e.width,l.y=h;break;case"bottomLeft":l.x=x,l.y=h+e.height;break;case"bottomRight":l.x=x+e.width,l.y=h+e.height}d=b(t,l,i,a)}return d&&r}function b(t,e,i=!1,a=!1){return e.diameter=1,e.radius=.5,e.centerX=e.x,e.centerY=e.y,e.gx=e.x,e.gy=e.y,u(t,e,i,a)}function e(e,i,n=!1,y=!1,x,a=void 0){let r,t=void 0!==e.parent,d=void 0!==i.parent;if(t&&i instanceof Array||d&&e instanceof Array){if(e instanceof Array){let[t,e]=[e,t]}for(let t=i.length-1;0<=t;t--){var h=i[t];(r=l(e,h))&&a&&a(r,h)}}else(r=l(e,i))&&a&&a(r);return r;function l(t,e){var i,a,r=void 0!==t.parent,d=void 0!==e.parent;if(r&&d)return t.diameter&&e.diameter?(r=t,a=e,n?r.vx+r.vy!==0&&a.vx+a.vy!==0?f(r,a,x):u(r,a,y,x):o(r,a)):t.diameter&&!e.diameter?(r=t,a=e,n?m(r,a,y,x):v(r,a,x)):(r=t,i=e,n?c(r,i,y,x):s(r,i,x));if(d&&void 0!==t.x&&void 0!==t.y)return g(t,e);throw new Error(`I'm sorry, ${t} and ${e} cannot be use together in a collision test.'`)}}function i(e,i){let t,a=void 0,r=void 0,d=void 0;if(i.length<=2)return!1;t=(e.y-i[0].y)*(i[1].x-i[0].x)-(e.x-i[0].x)*(i[1].y-i[0].y),a=t<0?"right":"left";for(let t=1;t<i.length-1;t++)if(r=(e.y-i[t].y)*(i[t+1].x-i[t].x)-(e.x-i[t].x)*(i[t+1].y-i[t].y),(d=r<0?"right":"left")!==a)return!1;return r=(e.y-i[i.length-1].y)*(i[0].x-i[i.length-1].x)-(e.x-i[i.length-1].x)*(i[0].y-i[i.length-1].y),(d=r<0?"right":"left")===a}export{g as hitTestPoint,o as hitTestCircle,u as circleCollision,f as movingCircleCollision,t as multipleCircleCollision,s as hitTestRectangle,c as rectangleCollision,v as hitTestCircleRectangle,l as hitTestCirclePoint,m as circleRectangleCollision,b as circlePointCollision,e as hit,i as hitPolygonConvex};