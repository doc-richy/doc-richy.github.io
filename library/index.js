import{game as B}from"./engine.js";import*as O from"./level.js";import*as R from"./move.js";import"./typedef.js";let W=document.getElementById("main"),M=document.getElementById("infodiv"),j=document.getElementById("infoframe"),N=document.getElementById("wait-video"),r={scaleCanvas:1,scaleX:1,scaleY:2,boxSize:90,boxViewQuantity:12,scaleFactor:()=>r.boxSize/512,quota:void 0},g={t:0,s:0,b:-1},a={t:0,bt:-1,s:0,bs:-1,b:-1,bb:-1},J=void 0,A=void 0,D=void 0,H=!1,V=!1,q=!1,U=!1,t=document.getElementById("btn-1"),s=document.getElementById("btn-2"),G=document.getElementsByClassName("floating-menu")[0],Q=!1,K=1920,Z=1080,ee=90,te=90,se=12,ie=12,p=.2,ae=.75,ne=[[{s:70,t:15.93,csec:15930},{s:106,t:80.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930}],[{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930}],[{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930}]],oe,re,ge,e,pe,le,i,l,n,ce,de,o,he,_e,ve,c,d,ue,me,xe,h,ye,be,we,fe,Se,ke,ze,Ye,$e,Fe,Xe,Ee,Le,Te,Pe,Ie,Ce,_,Be,v,u,Oe,Re,We,Me,je,Ne=100,m,x,y,Je,Ae,De,He,Ve,qe,b,w,f,S,k,Ue,Ge,Qe,Ke,Ze,et,tt,st,it,at,nt,ot,rt,gt,pt,lt,ct,dt=["12x12","14x14","16x16"],ht,_t,vt,ut,mt,z,Y,$={},F=[],X=[],E=1,L=1,xt=O.level[E-1][L-1],yt=1,bt=1,wt=setInterval(()=>I.progressBar.update(),5),ft=(document.addEventListener("myProper",e=>console.log("From my proper ",e.text)),512),St=[],kt,zt=[],T,Yt,$t,Ft,Xt,P,Et,Lt,Tt,Pt,It=/Mobile/i.test(navigator.userAgent),Ct=window.devicePixelRatio.toFixed(2),Bt=!1,I=(("ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints||"ontouchstart"in document.documentElement||"touchstart"in document.documentElement)&&(Bt=!0),It&&(bt=3.5<=Ct&&Ct<=4.2?yt=1.2:2.8<=Ct&&Ct<3.5?(yt=1.5,1.2):(yt=1.6,1.5)),new B(K,Z,function(){document.body.removeChild(N),I.progressBar.remove(),clearInterval(wt),t.src=I.assets["images/fullscreen_on_512_up.png"].src,t.style.width="64px",s.src=I.assets["images/sound_no_240_up.png"].src,s.style.width="64px",t.onpointerdown=e=>(document.fullscreenElement?(document.exitFullscreen(),t.src=I.assets["images/fullscreen_on_512_up.png"].src):(W.requestFullscreen().catch(e=>console.log(e)),t.src=I.assets["images/fullscreen_off_512_up.png"].src),e.preventDefault&&e.preventDefault(),e.returnValue&&(e.returnValue=!1),e.stopPropagation(),e.target.releasePointerCapture(e.pointerId),!1),t.addEventListener("mouseover",()=>{ce?t.src=I.assets["images/fullscreen_off_512_over.png"].src:t.src=I.assets["images/fullscreen_on_512_over.png"].src}),t.addEventListener("mouseleave",()=>{ce?t.src=I.assets["images/fullscreen_off_512_up.png"].src:t.src=I.assets["images/fullscreen_on_512_up.png"].src}),s.onpointerdown=e=>((Q=!Q)?s.src=I.assets["images/sound_yes_240_up.png"].src:s.src=I.assets["images/sound_no_240_up.png"].src,e.preventDefault&&e.preventDefault(),e.returnValue&&(e.returnValue=!1),e.stopPropagation(),e.target.releasePointerCapture(e.pointerId),!1),s.addEventListener("mouseover",()=>{Q?s.src=I.assets["images/sound_yes_240_over.png"].src:s.src=I.assets["images/sound_no_240_over.png"].src}),s.addEventListener("mouseleave",()=>{Q?s.src=I.assets["images/sound_yes_240_up.png"].src:s.src=I.assets["images/sound_no_240_up.png"].src}),ye=[I.assets["walkDownRight.png"],I.assets["images/road_512.png"],I.assets["images/forest_512.png"],I.assets["images/box_512.png"],I.assets["images/bananas_0_512.png"],I.assets["walkUpRight.png"],I.assets["walkUpLeft.png"],I.assets["walkUpRightPush.png"],I.assets["walkUpLeftPush.png"],I.assets["walkDownRight.png"],I.assets["walkDownLeft.png"],I.assets["walkDownRightPush.png"],I.assets["walkDownLeftPush.png"],I.assets["walkRightRight.png"],I.assets["walkRightLeft.png"],I.assets["walkRightRightPush.png"],I.assets["walkRightLeftPush.png"],I.assets["walkLeftRight.png"],I.assets["walkLeftLeft.png"],I.assets["walkLeftRightPush.png"],I.assets["walkLeftLeftPush.png"]],$.setVisible=()=>{F.forEach(e=>{e===$.activeSprite?e.visible=!0:(e.visible=!1,e.gridX=-10,e.gridY=-10)})},$.layer=3,$.bananasToEat=0,$.move=R.moveScene,re=I.assets["sounds/bounce.wav"],(oe=I.assets["sounds/music.wav"]).loop=!0,(Te=I.text("First","40px puzzler","deepskyblue")).y=I.canvas.height-135,(Pe=I.text("First","40px puzzler","deepskyblue")).y=I.canvas.height-90,(Ie=I.text("First","40px puzzler","deepskyblue")).y=I.canvas.height-45,(e=I.sprite(I.assets["images/fond_ecran_950.jpg"])).x=(I.canvas.width-e.width)/2,e.y=(I.canvas.height-e.height)/2,E=E||1,L=L||1,(n=I.button([I.assets["images/menu_open_512_up.png"],I.assets["images/menu_open_512_over.png"],I.assets["images/menu_open_512_up.png"]])).x=10,n.y=10,n.pivotX=0,n.pivotY=0,n.scaleX=p,n.scaleY=p,n.layer=20,n.visible=!1,n.interactive=!1,n.press=()=>ts(),(l=I.button([I.assets["images/menu_512_up.png"],I.assets["images/menu_512_over.png"],I.assets["images/menu_512_up.png"]])).x=10,l.y=10,l.pivotX=0,l.pivotY=0,l.scaleX=p,l.scaleY=p,l.layer=20,l.press=()=>ts(),c=I.sprite(I.assets["images/info_level_box.png"]),(d=I.text("12x12","50px puzzler","black",20,40)).content=dt[E-1],d.x=c.width/4,d.y=c.height/2-25,(ue=I.button([I.assets["images/b_scene_top_up.png"],I.assets["images/b_scene_top_over.png"],I.assets["images/b_scene_top_up.png"]])).x=c.width/2-ue.width/2,ue.y=c.height/4-ue.height/2,ue.press=()=>{E<3&&(is(E+=1,L),I.slide(d,d.x,d.y-40,10,["smoothstep"]),I.fadeOut(d,10),setTimeout(()=>{d.content=dt[E-1],d.y+=80,I.slide(d,d.x,c.height/2-25,15,["smoothstep"]),I.fadeIn(d,15)},100))},(me=I.button([I.assets["images/b_scene_up.png"],I.assets["images/b_scene_over.png"],I.assets["images/b_scene_up.png"]])).x=c.width/2-me.width/2,me.y=3*c.height/4-ue.height/2,me.press=()=>{1<E&&(is(--E,L),I.slide(d,d.x,d.y+40,10,["smoothstep"]),I.fadeOut(d,10),setTimeout(()=>{d.content=dt[E-1],d.y-=80,I.slide(d,d.x,c.height/2-25,15,["smoothstep"]),I.fadeIn(d,15)},200))},(xe=I.group(c,d,ue,me)).x=-I.canvas.width,xe.y=-I.canvas.height,de=I.sprite(I.assets["images/info_level_box.png"]),(o=I.text("Level "+L,"50px puzzler","black",20,40)).x=c.width/4,o.y=c.height/2-25,(he=I.button([I.assets["images/b_scene_top_up.png"],I.assets["images/b_scene_top_over.png"],I.assets["images/b_scene_top_up.png"]])).press=()=>{L<9&&(L+=1,is(E,L),I.slide(o,o.x,o.y-40,10,["smoothstep"]),I.fadeOut(o,10),setTimeout(()=>{o.content="Level "+L,o.y+=80,I.slide(o,o.x,de.height/2-25,15,["smoothstep"]),I.fadeIn(o,15)},100))},he.x=de.width/2-he.width/2,he.y=de.height/4-he.height/2,(_e=I.button([I.assets["images/b_scene_up.png"],I.assets["images/b_scene_over.png"],I.assets["images/b_scene_up.png"]])).x=de.width/2-_e.width/2,_e.y=3*de.height/4-he.height/2,_e.press=()=>{1<L&&(--L,is(E,L),I.slide(o,o.x,o.y+40,10,["smoothstep"]),I.fadeOut(o,10),setTimeout(()=>{o.content="Level "+L,o.y-=80,I.slide(o,o.x,de.height/2-25,15,["smoothstep"]),I.fadeIn(o,15)},100))},o.y=de.height/2-25,(ve=I.group(de,o,he,_e)).x=I.canvas.width,ve.y=-I.canvas.height,(i=I.button([I.assets["images/b_info_up.png"],I.assets["images/b_info_over.png"],I.assets["images/b_info_up.png"]])).x=(I.canvas.width-e.width)/4-.5*i.width*yt/2,i.y=Z-i.width,i.scaleX=.5*yt,i.scaleY=.5*yt,i.press=()=>{let e=I.rectangle(10,10,"#F7E9B8");e.pivotX=0,e.pivotY=0,e.x=i.x+i.width/2,e.y=i.y+i.height/2;var t=I.slide(e,e.x,100,30);I.tweenProperty(e,"scaleX",e.scaleX,180,30),I.tweenProperty(e,"scaleY",e.scaleY,80,30),t.onComplete=()=>{M.classList.remove("hide"),M.classList.add("show"),ls(),I.remove(e)}},(le=I.button([I.assets["images/b_reset.png"],I.assets["images/b_reset.png"],I.assets["images/b_reset.png"]])).x=I.canvas.width-le.width*yt,le.y=0,le.scaleX=yt,le.scaleY=yt,le.press=()=>{for(let t=1;t<4;t++)for(let e=1;e<10;e++)localStorage.removeItem(`data${t}${e}_g`),localStorage.removeItem(`data${t}${e}_gl`),localStorage.removeItem(`data${t}${e}_s`),localStorage.removeItem("data"+t+e)},(pe=I.button([I.assets["images/b_play_up.png"],I.assets["images/b_play_over.png"],I.assets["images/b_play_up.png"]])).x=K,pe.y=Z,pe.scaleX=yt,pe.scaleY=yt,pe.press=()=>{G.classList.contains("show")&&(G.classList.remove("show"),G.classList.add("hide"),ts()),Te.visible=!1,Pe.visible=!1,Ie.visible=!1,I.slide(ge,I.canvas.width,I.canvas.height,30,["decelerationCubed"]),I.slide(ut,0,0,30,["decelerationCubed"]).onComplete=()=>{rs()},E=E||1,L=L||1,d.content=dt[E-1],o.content="Level "+L,is(E,L),as(E,L),J=JSON.parse(localStorage.getItem(`data${E}${L}_g`)),A=JSON.parse(localStorage.getItem(`data${E}${L}_gl`)),D=JSON.parse(localStorage.getItem(`data${E}${L}_s`)),A&&(a={...A}),I.state=Zt},I.slide(pe,I.canvas.width-(I.canvas.width-e.width)/4-pe.width/2,.75*I.canvas.height-pe.width/2,30,["decelerationCubed"]),I.slide(xe,(I.canvas.width-e.width)/4-xe.width/2,e.y+xe.height/2,30,["decelerationCubed"]),I.slide(ve,I.canvas.width-(I.canvas.width-e.width)/4-ve.width/2,e.y+ve.height/2,30,["decelerationCubed"]),ge=I.group(e,i,pe,le,ve,xe,l,n),function(){mt=I.sprite(I.assets["images/infogame.png"]),Y=I.group(mt);var e="60px puzzler",t="black";(z=[[I.text("First",e,t,355,337),I.text("First",e,t,621,337),I.text("First",e,t,789,337),I.text("First",e,t,1077,337),I.text("First",e,t,1240,337),I.text("First",e,t,1489,337),I.text("First",e,t,1656,337)],[I.text("First",e,t,355,564),I.text("First",e,t,621,564),I.text("First",e,t,789,564),I.text("First",e,t,1077,564),I.text("First",e,t,1240,564),I.text("First",e,t,1489,564),I.text("First",e,t,1656,564)],[I.text("First",e,t,355,786),I.text("First",e,t,621,786),I.text("First",e,t,789,786),I.text("First",e,t,1077,786),I.text("First",e,t,1240,786),I.text("First",e,t,1489,786),I.text("First",e,t,1656,786)]]).forEach(e=>{e.forEach(e=>{e.pivotX=e.pivotY=.5})}),z[0][0].content="23.82",z[0][1].content="=";for(let t=0;t<3;t++)for(let e=0;e<7;e++)Y.add(z[t][e]);Y.visible=!1,Y.x=(I.canvas.width-1888)/2,Y.y=l.y+l.height*p+10,(Ce=I.button([I.assets["images/home_512_up.png"],I.assets["images/home_512_over.png"],I.assets["images/home_512_up.png"]])).press=()=>{Te.visible=!0,Pe.visible=!0,Ie.visible=!0,Y.visible&&(Y.visible=!1,St.forEach(e=>e.interactive=!0)),is(E,L),as(E,L),I.slide(ut,-I.canvas.width,I.canvas.height,30,["decelerationCubed"]).onComplete=()=>{rs()},I.slide(ge,0,0,30,["decelerationCubed"]),I.endGame()},Ce.x=I.canvas.width-1.1*Ce.width*p,Ce.y=10,Ce.scaleX=p,Ce.scaleY=p,(it=I.button([I.assets["images/infogame_512_up.png"],I.assets["images/infogame_512_over.png"],I.assets["images/infogame_512_up.png"]])).press=()=>{Y.visible?(Y.visible=!1,St.forEach(e=>e.interactive=!0)):(Y.visible=!0,ds("infoBtn"),St.forEach(e=>e.interactive=!1))},it.x=Ce.x-1.1*it.width*p,it.y=10,it.scaleX=p,it.scaleY=p,it.visible=!1,it.interactive=!1,zt.push(it),(v=I.button([I.assets["images/pause_512_up.png"],I.assets["images/pause_512_over.png"],I.assets["images/pause_512_up.png"]])).press=()=>ss(),Y.visible&&(Y.visible=!1,St.forEach(e=>e.interactive=!0)),v.x=l.x,v.y=10,v.scaleX=p,v.scaleY=p,(u=I.button([I.assets["images/pause_on_512_up.png"],I.assets["images/pause_on_512_over.png"],I.assets["images/pause_on_512_up.png"]])).press=()=>ss(),Y.visible&&(Y.visible=!1,St.forEach(e=>e.interactive=!0)),u.x=l.x,u.y=10,u.scaleX=p,u.scaleY=p,u.visible=!1,u.interactive=!1,(_=I.button([I.assets["images/restart_512_up.png"],I.assets["images/restart_512_over.png"],I.assets["images/restart_512_up.png"]])).press=()=>{Y.visible&&(Y.visible=!1,St.forEach(e=>e.interactive=!0)),is(E,L),I.slide(ut,0,0,30,["decelerationCubed"]),I.state=Zt},_.x=l.x+1.1*l.width*p,_.y=10,_.scaleX=p,_.scaleY=p,_.visible=!1,_.interactive=!1,zt.push(_),(Oe=I.button([I.assets["images/save_512_up.png"],I.assets["images/save_512_over.png"],I.assets["images/save_512_up.png"]])).press=()=>{Y.visible&&(Y.visible=!1),hs(),I.slide(qe,.5*I.canvas.width-380,.5*I.canvas.height-256,30)},Oe.x=_.x+1.1*Oe.width*p,Oe.y=10,Oe.scaleX=p,Oe.scaleY=p,Oe.visible=!1,Oe.interactive=!1,zt.push(Oe),(Be=I.button([I.assets["images/b_about_up_128.png"],I.assets["images/b_about_over_128.png"],I.assets["images/b_about_up_128.png"]])).press=()=>async function(){var e={is_M:It,is_T:Bt,DPI:Ct,WA:window.screen.availWidth,HA:window.screen.availHeight,WW:window.innerWidth,WH:window.innerHeight,DW:document.body.width,DH:document.body.height,S_C:r.scaleCanvas.toFixed(2),S_X:r.scaleX.toFixed(2),S_Y:r.scaleY.toFixed(2),Q:r.quota},t={scene:E,level:L},e=((s=[]).push(e,t,g,X),`Yo_${dt[E-1]}_Level_`+L),t=document.createElement("a"),s=new Blob([JSON.stringify(s)],{type:"text/plain"});t.setAttribute("href",URL.createObjectURL(s)),t.setAttribute("download",e.toLowerCase()+".json"),t.click(),URL.revokeObjectURL(t.href)}(),Be.x=_.x,Be.y=I.canvas.height-Be.height-10,fe=I.sprite(I.assets["images/view_420x1080.png"]),(Se=I.sprite(I.assets["images/view_420x1080.png"])).x=1500,($e=I.sprite(I.assets["images/step_512_neutral.png"])).x=0,$e.y=0,$e.scaleX=p,$e.scaleY=p,(Xe=I.text(" : "+(X.length-1),"60px puzzler","black")).x=$e.width*p+10,Xe.y=$e.height*p/2-30,Xe.pivotX=0,Xe.pivotY=0,Xe.scaleX=bt,Xe.scaleY=bt,I.pushMessage(Xe),(nt=I.sprite(I.assets["images/time_512_neutral.png"])).x=0,nt.y=0,nt.scaleX=p,nt.scaleY=p,(Ee=I.text(" : ","60px puzzler","black")).x=nt.width*p+10,Ee.y=nt.height*p/2-30,Ee.pivotX=0,Ee.pivotY=0,Ee.scaleX=bt,Ee.scaleY=bt,I.pushMessage(Ee),(gt=I.sprite(I.assets["images/bananas_512_neutral.png"])).x=0,gt.y=0,gt.scaleX=p,gt.scaleY=p,(Le=I.text(" : "+$.bananasToEat,"60px puzzler","black")).x=gt.width*p+10,Le.y=gt.height*p/2-30,Le.pivotX=0,Le.pivotY=0,Le.scaleX=bt,Le.scaleY=bt,I.pushMessage(Le),(lt=I.sprite(I.assets["images/yo_level_512.png"])).x=0,lt.y=0,lt.scaleX=p,lt.scaleY=p,(ct=I.text("","40px puzzler","black")).x=lt.width*p+10,ct.y=lt.height*p/2-40,ct.pivotX=0,ct.pivotY=0,ct.scaleX=bt,ct.scaleY=bt,(ht=I.text("","40px puzzler","black")).x=lt.width*p+10,ht.y=lt.height*p/2+10,ht.pivotX=0,ht.pivotY=0,ht.scaleX=bt,ht.scaleY=bt,os(),ns(),(at=I.group($e,Xe)).x=0,at.y=0,(rt=I.group(nt,Ee)).x=0,rt.y=0,(pt=I.group(gt,Le)).x=0,pt.y=at.height*p*1.1+at.y,pt.visible=!1,zt.push(pt),(_t=I.group(lt,ct,ht)).x=0,_t.y=rt.height*p*1.1+rt.y,_t.visible=!1,zt.push(_t),(Yt=I.button([I.assets["images/pad_512_up_up.png"],I.assets["images/pad_512_up_over.png"],I.assets["images/pad_512_up_up.png"]],[])).press=()=>{Wt.press()},($t=I.button([I.assets["images/pad_512_down_up.png"],I.assets["images/pad_512_down_over.png"],I.assets["images/pad_512_down_up.png"]],[])).press=()=>{Jt.press()},(Ft=I.button([I.assets["images/pad_512_right_up.png"],I.assets["images/pad_512_right_over.png"],I.assets["images/pad_512_right_up.png"]],[])).press=()=>{jt.press()},(Xt=I.button([I.assets["images/pad_512_left_up.png"],I.assets["images/pad_512_left_over.png"],I.assets["images/pad_512_left_up.png"]],[])).press=()=>{Ot.press()},(T=I.group(Yt,$t,Ft,Xt)).x=10,T.y=I.canvas.height/2-T.height/4*ae,T.scaleX=T.scaleY=ae,(Et=I.button([I.assets["images/pad_512_up_up.png"],I.assets["images/pad_512_up_over.png"],I.assets["images/pad_512_up_up.png"]],[])).press=()=>{Wt.press()},(Lt=I.button([I.assets["images/pad_512_down_up.png"],I.assets["images/pad_512_down_over.png"],I.assets["images/pad_512_down_up.png"]],[])).press=()=>{Jt.press()},(Tt=I.button([I.assets["images/pad_512_right_up.png"],I.assets["images/pad_512_right_over.png"],I.assets["images/pad_512_right_up.png"]],[])).press=()=>{jt.press()},(Pt=I.button([I.assets["images/pad_512_left_up.png"],I.assets["images/pad_512_left_over.png"],I.assets["images/pad_512_left_up.png"]],[])).press=()=>{Ot.press()},(P=I.group(Et,Lt,Tt,Pt)).x=I.canvas.width-P.width*ae-10,P.y=I.canvas.height/2-P.height/4*ae,P.scaleX=ae,P.scaleY=ae,St.push(Yt,$t,Ft,Xt,Et,Lt,Tt,Pt),(Fe=I.group(at,pt)).x=10,Fe.y=1.1*l.height*p,(ot=I.group(rt,_t)).x=I.canvas.width-fe.width+10,ot.y=1.1*it.height*p,(vt=I.group(fe,Se,Fe,ot,Ce,it,_,v,u,Oe,T,P,Y,Be)).layer=5,rs()}(),function(e,t){if(e<1&&3<e)throw new Error(`This level : ${e} is not developped yet.`);if(1===e){if(t<1&&9<t)throw new Error(`This level : ${t} is not developped yet.`);se=ie=12}else if(2===e){if(t<1&&9<t)throw new Error(`This levelToSet : ${t} is not developped yet.`);se=ie=14}else{if(3!==e)throw new Error(`This scene : ${e} is not developped yet.`);if(t<1&&9<t)throw new Error(`This levelToSet : ${t} is not developped yet.`);se=ie=16}if(xt=O.level[e-1][t-1],L=t,E=e,h=I.gridSpecial(se,ie,ee,te,xt,ye,$,F,r.scaleFactor(),!1,0,0),$.activeSprite=F[4],$.setVisible(),X=[],I.setYo($),I.setStepArray(X),g.b=$.bananasToEat,I.setGameInfo(g),(be=I.sprite(I.assets["images/forest24.jpg"])).layer=-1,be.pivotX=0,be.pivotY=0,ke=I.sprite(I.assets["images/blocksBorder_12x12.png"]),ze=I.sprite(I.assets["images/blocksBorder_14x14.png"]),Ye=I.sprite(I.assets["images/blocksBorder_16x16.png"]),ke.layer=ze.layer=Ye.layer=4,1===E)ke.visible=!0,ze.visible=!1,Ye.visible=!1,h.addChild(ke);else if(2===E)ke.visible=!1,ze.visible=!0,Ye.visible=!1,h.addChild(ze);else{if(3!==E)throw new Error(`Scene playing : ${E} not possible.`);ke.visible=!1,ze.visible=!1,Ye.visible=!0,h.addChild(Ye)}(we=I.group(be,h)).x=420,we.layer=2,(ut=I.group(we,vt)).x=-I.canvas.width,ut.y=I.canvas.height,ut.layer=-1,rs(),R.setScene(e,r),ts()}(1,1),function(){w=I.sprite(I.assets["images/save_img.png"]),f=I.sprite(I.assets["images/save_img_in.png"]),S=I.text("temp","30px puzzler","black"),k=I.text("temp","30px puzzler","black"),Ue=I.text("temp","30px puzzler","black"),Ge=I.text("temp","30px puzzler","black"),Qe=I.text("temp","30px puzzler","black"),Ke=I.text("temp","30px puzzler","black"),Ze=I.text("temp","30px puzzler","black"),et=I.text("temp","30px puzzler","black"),hs(),(st=I.button([I.assets["images/save_cancel_512_up.png"],I.assets["images/save_cancel_512_over.png"],I.assets["images/save_cancel_512_up.png"]])).x=.25*f.width-.5*st.width*p,st.y=f.height-1.2*st.height*p-32,st.scaleX=p,st.scaleY=p,(tt=I.button([I.assets["images/save_ok_512_up.png"],I.assets["images/save_ok_512_over.png"],I.assets["images/save_ok_512_up.png"]])).x=.75*f.width-.5*tt.width*p,tt.y=f.height-1.2*tt.height*p-32,tt.scaleX=p,tt.scaleY=p,tt.press=()=>{if(U)localStorage.removeItem(`data${E}${L}_s`),localStorage.setItem(`data${E}${L}_g`,JSON.stringify(g)),localStorage.setItem(`data${E}${L}_gl`,JSON.stringify(a)),localStorage.setItem(`data${E}${L}_s`,JSON.stringify(X));else{if(J=JSON.parse(localStorage.getItem(`data${E}${L}_g`)),A=JSON.parse(localStorage.getItem(`data${E}${L}_gl`)),D=JSON.parse(localStorage.getItem(`data${E}${L}_s`)),!J)return is(E,L),void I.slide(b,b.x,I.canvas.height,30);is(E,L),g={...J},a={...A},X=[...D],I.setGameInfo(g),I.setStepArray(X),os();let e=1;if(1===X.length)return void I.slide(b,b.x,I.canvas.height,30);I.setReplayMode(!0),wt=setInterval(()=>{"u"===X[e].d?$.move("up",h,$,F):"d"===X[e].d?$.move("down",h,$,F):"r"===X[e].d?$.move("right",h,$,F):"l"===X[e].d&&$.move("left",h,$,F),++e===X.length&&(clearInterval(wt),I.setReplayMode(!1))},Ne)}I.slide(b,b.x,I.canvas.height,30)},st.press=()=>{I.slide(b,b.x,I.canvas.height,30)};var e="30px puzzler";je=I.text("Replay > ",e,"black"),m=I.text(" Slow: ",e,"black"),x=I.text(" Fast: ",e,"black"),y=I.text(" Faster: ",e,"black"),Je=I.button([I.assets["images/checked_box_512.png"],I.assets["images/checked_box_512.png"]]),Ae=I.button([I.assets["images/checked_box_512.png"],I.assets["images/checked_box_512.png"]]),De=I.button([I.assets["images/checked_box_512.png"],I.assets["images/checked_box_512.png"]]),He=I.sprite(I.assets["images/checked_512_up.png"]),Je.press=()=>{He.x=m.x+m.width,Ne=200},Ae.press=()=>{He.x=x.x+x.width,Ne=100},De.press=()=>{He.x=y.x+y.width,Ne=50},Ve=I.group(je,He,m,Je,x,Ae,y,De),(b=I.group(f,Ke,Ze,et,Ve,tt,st)).x=.5*I.canvas.width-.5*f.width,b.y=I.canvas.height,b.layer=50,(Re=I.button([I.assets["images/save_cancel_512_up.png"],I.assets["images/save_cancel_512_over.png"],I.assets["images/save_cancel_512_up.png"]])).x=.5*w.width-.5*Re.width*p,Re.y=w.height-1.2*Re.height*p-32,Re.scaleX=p,Re.scaleY=p,Re.press=()=>{I.slide(qe,qe.x,-I.canvas.height,30)},(We=I.button([I.assets["images/save_512_in_up.png"],I.assets["images/save_512_in_over.png"],I.assets["images/save_512_in_up.png"]])).press=()=>{let e,t,s;q=!1,U=!0,I.slide(b,b.x,.5*I.canvas.height-.5*f.height,30),I.slide(qe,qe.x,-I.canvas.height,30),Ve.visible=!1,s=H?(e="Already saved",t="Want to save anyway !","The last saved game will be lost."):(e="Save !",t="First time saved.","Only one saved game at a time."),_s(e,t,s)},We.x=.25*w.width-.5*We.width*p,We.y=w.height-1.2*We.height*p-32,We.scaleX=p,We.scaleY=p,(Me=I.button([I.assets["images/save_512_out_up.png"],I.assets["images/save_512_out_over.png"],I.assets["images/save_512_out_up.png"]])).x=.75*w.width-.5*Me.width*p,Me.y=w.height-1.2*Me.height*p-32,Me.scaleX=p,Me.scaleY=p,Me.press=()=>{let e,t,s;q=!0,U=!1,I.slide(b,b.x,.5*I.canvas.height-.5*f.height,30),I.slide(qe,qe.x,-I.canvas.height,30),H?(e="Load the game !",t="Present data will be lost.",s="Load anyway !",Ve.visible=!0):(e="Can not open this game !",t="Not saved yet.",s="Only saved game can be opened.",Ve.visible=!1),_s(e,t,s)},(qe=I.group(w,S,k,Ue,Ge,Qe,We,Re,Me)).x=.5*I.canvas.width-.5*w.width,qe.y=-I.canvas.height}(),ps(),jt.press=Nt.press=qt.press=Kt.press=()=>{$.move("right",h,$,F),X.push({x:this.yo.activeSprite.gridX,y:this.yo.activeSprite.gridY,d:"r"})},Wt.press=Mt.press=Dt.press=Ut.press=()=>{$.move("up",h,$,F),X.push({x:this.yo.activeSprite.gridX,y:this.yo.activeSprite.gridY,d:"u"})},Ot.press=Rt.press=Ht.press=Gt.press=()=>{$.move("left",h,$,F),X.push({x:this.yo.activeSprite.gridX,y:this.yo.activeSprite.gridY,d:"l"})},Jt.press=At.press=Vt.press=Qt.press=()=>{$.move("down",h,$,F),X.push({x:this.yo.activeSprite.gridX,y:this.yo.activeSprite.gridY,d:"d"})},kt=[Wt,Mt,Dt,Ut,Jt,At,Vt,Qt,jt,Nt,Ht,Gt,Ot,Rt,qt,Kt,Yt,$t,Ft,Xt,Et,Lt,Tt,Pt],I.setButtonsMove(kt,v)},["images/walk_512.json","images/info_box.png","images/info_level_box.png","images/view_420x1080.png","images/blocksBorder_12x12.png","images/blocksBorder_14x14.png","images/blocksBorder_16x16.png","images/b_info_up.png","images/b_info_over.png","images/b_scene_up.png","images/b_scene_over.png","images/b_scene_top_up.png","images/b_scene_top_over.png","images/b_play_up.png","images/b_play_over.png","images/b_reset.png","images/infogame.png","images/yo_level_512.png","images/save_img.png","images/save_img_in.png","images/save_ok_512_up.png","images/save_ok_512_over.png","images/save_cancel_512_up.png","images/save_cancel_512_over.png","images/save_512_up.png","images/save_512_over.png","images/save_512_in_up.png","images/save_512_in_over.png","images/save_512_out_up.png","images/save_512_out_over.png","images/infogame_512_up.png","images/infogame_512_over.png","images/restart_512_up.png","images/restart_512_over.png","images/pause_512_up.png","images/pause_512_over.png","images/pause_on_512_up.png","images/pause_on_512_over.png","images/home_512_up.png","images/home_512_over.png","images/menu_512_up.png","images/menu_512_over.png","images/menu_open_512_up.png","images/menu_open_512_over.png","images/road_512.png","images/forest_512.png","images/forest.png","images/forest24.jpg","images/box_512.png","images/bananas_0_512.png","images/bananas_512_neutral.png","images/fond_ecran_950.jpg","images/emoji_yo.png","sounds/bounce.wav","sounds/music.wav","fonts/puzzler.otf","images/pad_512_up_up.png","images/pad_512_up_over.png","images/pad_512_down_up.png","images/pad_512_down_over.png","images/pad_512_right_up.png","images/pad_512_right_over.png","images/pad_512_left_up.png","images/pad_512_left_over.png","images/step_512_neutral.png","images/time_512_neutral.png","images/fullscreen_on_512_up.png","images/fullscreen_on_512_over.png","images/fullscreen_off_512_up.png","images/fullscreen_off_512_over.png","images/sound_yes_240_up.png","images/sound_yes_240_over.png","images/sound_no_240_up.png","images/sound_no_240_over.png","images/b_about_up_128.png","images/b_about_over_128.png","images/checked_512_up.png","images/checked_512_over.png","images/checked_box_512.png"],function(){0===I.progressBar.counter&&(I.progressBar.setBackgroundColor("#FFA80F"),I.progressBar.setForegroundColor("#FFEC4B"),I.progressBar.create(I.canvas,I.assets,I.canvas.width/2,100)),I.progressBar.update()})),Ot=(W.appendChild(I.canvas),window.infoHide=e=>{M.classList.remove("show"),M.classList.add("hide")},window.about=e=>{j.src="./html_page/about.html"},window.general=e=>{j.src="./html_page/general.html"},window.buttonsExplained=e=>{j.src="./html_page/buttonsexplained.html"},window.spareButton=e=>{j.src="./html_page/sparebutton.html"},I.keyboard(37)),Rt=I.keyboard(100),Wt=I.keyboard(38),Mt=I.keyboard(104),jt=I.keyboard(39),Nt=I.keyboard(102),Jt=I.keyboard(40),At=I.keyboard(98),Dt=I.keyboard(87),Ht=I.keyboard(65),Vt=I.keyboard(83),qt=I.keyboard(68),Ut=I.keyboard(73),Gt=I.keyboard(74),Qt=I.keyboard(75),Kt=I.keyboard(76);function Zt(){0===$.bananasToEat&&(I.pause(),I.endGame(),I.wait(1e3).then(()=>es()))}function es(){oe.volume=.3,ds("end")}function ts(){Y.visible&&(Y.visible=!1,St.forEach(e=>e.interactive=!0)),setTimeout(()=>{l.visible?(l.visible=!1,l.interactive=!1,n.visible=!0,n.interactive=!0,I.fadeIn(n,30),I.fadeOut(l,30),G.classList.remove("hide"),G.classList.add("show")):(l.visible=!0,l.interactive=!0,n.visible=!1,n.interactive=!1,I.fadeIn(l,30),I.fadeOut(n,30),G.classList.remove("show"),G.classList.add("hide"))},200)}function ss(){Y.visible&&(Y.visible=!1,St.forEach(e=>e.interactive=!0)),v.visible?(v.visible=!1,u.visible=!0,setTimeout(()=>{v.interactive=!1,I.isPlaying&&I.pause(),u.interactive=!0,zt.forEach((e,t)=>{t<=2?(e.visible=!0,e.interactive=!0):e.visible=!0})},200)):(v.visible=!0,u.visible=!1,setTimeout(()=>{v.interactive=!0,u.interactive=!1,zt.forEach((e,t)=>{t<=2?(e.visible=!1,e.interactive=!1):e.visible=!1})},200))}function is(e,t){if(e<1&&4<e)throw new Error(`This level : ${e} is not developped yet.`);if(1===e){if(t<1&&9<t)throw new Error(`This level : ${t} is not developped yet.`);se=ie=12}else if(2===e){if(t<1&&9<t)throw new Error(`This levelToSet : ${t} is not developped yet.`);se=ie=14}else{if(3!==e)throw new Error(`This scene : ${e} is not developped yet.`);if(t<1&&9<t)throw new Error(`This levelToSet : ${t} is not developped yet.`);se=ie=16}if(xt=O.level[e-1][t-1],L=t,E=e,1e3<g.t&&(a.t=Object.values(g)[0],a.s=Object.values(g)[1],a.b=Object.values(g)[2]),we.remove(h),$.bananasToEat=0,h=I.gridSpecial(se,ie,ee,te,xt,ye,$,F,r.scaleFactor(),!1,0,0),$.activeSprite=F[4],$.setVisible(),(X=[]).push({x:$.activeSprite.gridX,y:$.activeSprite.gridY,d:"s"}),I.setYo($),I.setStepArray(X),ds("resetAll"),g.t=0,g.s=0,g.b=$.bananasToEat,I.setGameInfo(g),os(),1===E)ke.visible=!0,ze.visible=!1,Ye.visible=!1,h.addChild(ke);else if(2===E)ke.visible=!1,ze.visible=!0,Ye.visible=!1,h.addChild(ze);else{if(3!==E)throw new Error(`Scene playing : ${E} not possible.`);ke.visible=!1,ze.visible=!1,Ye.visible=!0,h.addChild(Ye)}we.addChild(h),R.setScene(e,r),Xe.content=" "+(X.length-1),Le.content=" "+$.bananasToEat}function as(e,t){E=e,L=t,d.content=dt[E-1],o.content="Level "+L}function ns(){Te.layer=100,Pe.layer=100,Ie.layer=100,Te.content=`is_M=${It} & is_T=${Bt} | DPI=${Ct} `,Pe.content=`WA=${window.screen.availWidth},HA=`+window.screen.availHeight,Pe.content+=` | WW=${window.innerWidth},WH=`+window.innerHeight,Pe.content+=` | VW=${visualViewport.width},VH=`+visualViewport.height,Ie.content=`S_C=${r.scaleCanvas.toFixed(2)} & S_X= ${r.scaleX.toFixed(2)} & S_Y= `+r.scaleY.toFixed(2)}function os(){Xe.content=" "+(X.length-1),Ee.content=g.t<=0?" : .....":cs(g.t),Le.content=" "+g.b,ct.content=dt[E-1],ht.content="     "+L}function rs(){var e=ft*ae;Yt.points=[{x:T.gx+.406*e,y:T.gy+.406*e},{x:T.gx+0*e,y:T.gy+0*e},{x:T.gx+e,y:T.gy+0*e},{x:T.gx+.6*e,y:T.gy+.406*e}],$t.points=[{x:T.gx+.406*e,y:T.gy+.6*e},{x:T.gx+.6*e,y:T.gy+.6*e},{x:T.gx+e,y:T.gy+e},{x:T.gx+0*e,y:T.gy+e}],Ft.points=[{x:T.gx+.6*e,y:T.gy+.406*e},{x:T.gx+e,y:T.gy+0*e},{x:T.gx+e,y:T.gy+e},{x:T.gx+.6*e,y:T.gy+.6*e}],Xt.points=[{x:T.gx+.406*e,y:T.gy+.406*e},{x:T.gx+.406*e,y:T.gy+.6*e},{x:T.gx+0*e,y:T.gy+e},{x:T.gx+0*e,y:T.gy+0*e}],Et.points=[{x:P.gx+.406*e,y:P.gy+.406*e},{x:P.gx+0*e,y:P.gy+0*e},{x:P.gx+e,y:P.gy+0*e},{x:P.gx+.6*e,y:P.gy+.406*e}],Lt.points=[{x:P.gx+.406*e,y:P.gy+.6*e},{x:P.gx+.6*e,y:P.gy+.6*e},{x:P.gx+e,y:P.gy+e},{x:P.gx+0*e,y:P.gy+e}],Tt.points=[{x:P.gx+.6*e,y:P.gy+.406*e},{x:P.gx+e,y:P.gy+0*e},{x:P.gx+e,y:P.gy+e},{x:P.gx+.6*e,y:P.gy+.6*e}],Pt.points=[{x:P.gx+.406*e,y:P.gy+.406*e},{x:P.gx+.406*e,y:P.gy+.6*e},{x:P.gx+0*e,y:P.gy+e},{x:P.gx+0*e,y:P.gy+0*e}]}function gs(){var e=document.querySelector(":root");N.width=I.canvas.width*r.scaleCanvas,e.style.setProperty("--wait-width",N.width+"px"),e.style.setProperty("--wait-left",I.canvas.offsetLeft+"px"),e.style.setProperty("--wait-top",I.canvas.offsetTop+"px")}function ps(){var e=document.querySelector(":root"),t=(getComputedStyle(e),Math.floor(l.width*p*r.scaleCanvas)),s=Math.floor(l.width*p*r.scaleCanvas),i=(I.canvas.offsetTop,10*r.scaleCanvas);let a=10;var n=I.canvas.offsetTop+l.y*r.scaleY,o=I.canvas.offsetLeft+(l.width*p+10)*r.scaleX;It&&(a=5),e.style.setProperty("--btn-width",t+"px"),e.style.setProperty("--btn-height",s+"px"),e.style.setProperty("--menu-top",n+"px"),e.style.setProperty("--menu-left",o+"px"),e.style.setProperty("--menu-gap",i+"px"),e.style.setProperty("--border-iframe",a+"px")}function ls(){var e=I.canvas.offsetTop+l.height*p*r.scaleCanvas+10,t=.95*(window.innerHeight-e),s=.8*window.innerWidth,i=document.getElementById("infoframe").contentWindow.document.querySelector(":root"),i=(It&&(i.style.setProperty("--font-p","15px"),i.style.setProperty("--margin-p-v","5px"),i.style.setProperty("--margin-p-h","10px"),i.style.setProperty("--font-header","15px"),i.style.setProperty("--font-footer","15px"),i.style.setProperty("--font-buttons","12px"),i.style.setProperty("--btn-width","80px"),i.style.setProperty("--bnt-height","25px"),i.style.setProperty("--img-w","64px"),i.style.setProperty("--img-h","64px"),i.style.setProperty("--margin-flex","5%"),i.style.setProperty("--margin-line","5px")),.1*window.innerWidth);M.style.top=e+"px",M.style.width=s+"px",M.style.height=t+"px",M.style.margin=`0  ${i}px`}function cs(e){var t=(e=(e/1e3).toFixed(1)).toString().substring(e.toString().indexOf(".")+1),e=Math.floor(e),s=Math.floor(e/60);let i="0",a=9<s?"":"0";return 9<e%60&&(i=""),s<=0?""+i+e%60+"."+t:a+s+`:${i}${e%60}.`+t}function ds(e){let t={};function s(a,n){if(0===a){let e=void 0,t=void 0,s=void 0,i=void 0;n.first<=0?(z[a][0].content="?",z[a][0].x=400,z[a][1].content="?"):(e=+(n.first/1e3).toFixed(1),z[a][0].content=cs(n.first),z[a][0].x=415-15*cs(n.first).length),n.second<0?(z[a][2].content="?",z[a][2].x=849,z[a][3].content="?"):(t=+(n.second/1e3).toFixed(1),z[a][2].content=cs(n.second),z[a][2].x=864-15*cs(n.second).length),void 0!==e&&void 0!==t&&(e===t?z[a][1].content="=":e<t?z[a][1].content="<":z[a][1].content=">"),n.third<=0?(z[a][4].content="?",z[a][4].x=1285,z[a][3].content="?",z[a][5].content="?"):(s=+(n.third/1e3).toFixed(1),z[a][4].content=cs(n.third),z[a][4].x=1300-15*cs(n.third).length),void 0!==t&&void 0!==s&&(t===s?z[a][3].content="=":t<s?z[a][3].content="<":z[a][3].content=">"),n.fourth<=0?(z[a][6].content="?",z[a][6].x=1701):(i=+(n.fourth/1e3).toFixed(1),z[a][6].content=cs(n.fourth),z[a][6].x=1716-15*cs(n.fourth).length),void 0!==s&&void 0!==i&&(s===i?z[a][5].content="=":s<i?z[a][5].content="<":z[a][5].content=">")}else if(1===a){let e=void 0,t=void 0,s=void 0,i=void 0;n.first<=0?(z[a][0].content="?",z[a][0].x=400,z[a][1].content="?"):(e=n.first,z[a][0].content=n.first.toString(),z[a][0].x=415-15*n.first.toString().length),n.second<0?(z[a][2].content="?",z[a][2].x=849):(t=n.second,z[a][2].content=n.second.toString(),z[a][2].x=864-15*n.second.toString().length),void 0!==e&&void 0!==t&&(n.first===n.second?z[a][1].content="=":n.first<n.second?z[a][1].content="<":z[a][1].content=">"),n.third<=0?(z[a][4].content="?",z[a][4].x=1285,z[a][3].content="?",z[a][5].content="?"):(s=n.third,z[a][4].content=n.third.toString(),z[a][4].x=1300-15*n.third.toString().length),void 0!==t&&void 0!==s&&(n.second===n.third?z[a][3].content="=":n.second<n.third?z[a][3].content="<":z[a][3].content=">"),n.fourth<=0?(z[a][6].content="?",z[a][6].x=1701,z[a][5].content="?"):(i=n.fourth,z[a][6].content=n.fourth.toString(),z[a][6].x=1716-15*n.fourth.toString().length),void 0!==s&&void 0!==i&&(n.third===n.fourth?z[a][5].content="=":n.third<n.fourth?z[a][5].content="<":z[a][5].content=">")}else if(2===a){let e=void 0,t=void 0,s=void 0,i=void 0;n.first<0?(z[a][0].content="?",z[a][0].x=400,z[a][1].content="?"):(e=n.first,z[a][0].content=n.first.toString(),z[a][0].x=415-15*n.first.toString().length),n.second<0?(z[a][2].content="?",z[a][2].x=849):(t=n.second,z[a][2].content=n.second.toString(),z[a][2].x=864-15*n.second.toString().length),void 0!==e&&void 0!==t&&(n.first===n.second?z[a][1].content="=":n.first<n.second?z[a][1].content="<":z[a][1].content=">"),n.third<0?(z[a][4].content="?",z[a][4].x=1285,z[a][3].content="?",z[a][5].content="?"):(s=n.third,z[a][4].content=n.third.toString(),z[a][4].x=1300-15*n.third.toString().length),void 0!==t&&void 0!==s&&(n.second===n.third?z[a][3].content="=":n.second<n.third?z[a][3].content="<":z[a][3].content=">"),n.fourth<0?(z[a][6].content="?",z[a][6].x=1701,z[a][5].content="?"):(i=n.fourth,z[a][6].content=n.fourth.toString(),z[a][6].x=1716-15*n.fourth.toString().length),void 0!==s&&void 0!==i&&(n.third===n.fourth?z[a][5].content="=":n.third<n.fourth?z[a][5].content="<":z[a][5].content=">")}}function i(){t.first=a.t,t.second=g.t,t.third=a.bt,t.fourth=ne[E-1][L-1].csec,s(0,t),t.first=a.s,t.second=g.s,t.third=a.bs,t.fourth=ne[E-1][L-1].s,s(1,t),t.first=a.b,t.second=g.b,t.third=a.bb,t.fourth=0,s(2,t)}!async function(){var e;navigator.storage&&navigator.storage.estimate&&((e=await navigator.storage.estimate()).usage,e.quota,e=e.quota-e.usage,r.quota=(e/1024/1024).toFixed(1))}(),"restart"===e||"infoBtn"===e?i():"end"===e&&(a.bt=Math.min(a.bt<=0?1/0:a.bt,g.t),a.bs=Math.min(a.bs<=0?1/0:a.bs,g.s),a.bb=Math.min(a.bb<=0?1/0:a.bb,g.b),localStorage.setItem(`data${E}${L}_gl`,JSON.stringify(a)),i())}function C(e,t){return I.canvas.ctx.font=e,{width:I.canvas.ctx.measureText(t).width,height:I.canvas.ctx.measureText("M").width}}function hs(e,t,s,i,a){let n="40px puzzler",o="60px puzzler";It&&(n="40px puzzler",o="50px puzzler"),q=U=!1,J=JSON.parse(localStorage.getItem(`data${E}${L}_g`)),A=JSON.parse(localStorage.getItem(`data${E}${L}_gl`)),D=JSON.parse(localStorage.getItem(`data${E}${L}_s`)),a=J?(H=!0,V=!0,e="Open the game !",t=dt[E-1]+" Level:"+L,s="Time : "+cs(J.t),i="Steps : "+J.s,"Bananas : "+J.b):(H=!1,V=!1,e="Save the game !",t=dt[E-1]+" Level:"+L,s="Time : "+cs(g.t),i="Steps : "+g.s,"Bananas : "+g.b),S.font=o,S.content=e,S.width=C(o,e).width,S.height=C(o,e).height,S.x=.5*w.width-.5*S.width,S.y=32,k.font=o,k.content=t,k.width=C(o,t).width,k.height=C(o,t).height,k.x=.5*w.width-.5*k.width,k.y=S.y+S.height+10,Ue.content=s,Ue.font=n,Ue.width=C(n,s).width,Ue.height=C(n,s).height,Ue.x=.5*w.width-.5*Ue.width,Ue.y=k.y+k.height+20,Ge.content=i,Ge.font=n,Ge.width=C(n,i).width,Ge.height=C(n,i).height,Ge.x=.5*w.width-.5*Ge.width,Ge.y=Ue.y+Ue.height+10,Qe.content=a,Qe.font=n,Qe.width=C(n,a).width,Qe.height=C(n,a).height,Qe.x=.5*w.width-.5*Qe.width,Qe.y=Ge.y+Ge.height+10}function _s(e,t,s){let i="40px puzzler",a="60px puzzler";var n="30px puzzler",e=(It&&(i="40px puzzler",a="50px puzzler"),Ke.font=a,Ke.content=e,Ke.width=C(a,e).width,Ke.height=C(a,e).height,Ke.x=.5*f.width-.5*Ke.width,Ke.y=32,Ze.font=a,Ze.content=t,Ze.width=C(a,t).width,Ze.height=C(a,t).height,Ze.x=.5*f.width-.5*Ze.width,Ze.y=Ke.y+Ke.height+10,et.content=s,et.font=i,et.width=C(i,s).width,et.height=C(i,s).height,et.x=.5*f.width-.5*et.width,et.y=Ze.y+Ze.height+20,je.font=n,je.width=C(n,"Replay > ").width,je.height=C(n,"Replay > ").height,m.font=n,m.width=C(n," Slow: ").width,m.height=C(n," Slow: ").height,x.font=n,x.width=C(n," Fast: ").width,x.height=C(n," Fast: ").height,y.font=n,y.width=C(n," Faster: ").width,y.height=C(n," Faster: ").height,Je.scaleX=Je.scaleY=.5*p,Ae.scaleX=Ae.scaleY=.5*p,De.scaleX=De.scaleY=.5*p,He.scaleX=He.scaleY=.5*p,m.x=je.width,Je.x=m.x+m.width,x.x=m.x+m.width+Je.width*p*.5,Ae.x=x.x+x.width,0===He.x&&(He.x=Ae.x),y.x=x.x+x.width+Ae.width*p*.5,De.x=y.x+y.width,je.y=m.y=x.y=y.y=Je.height*p*.5*.5-.5*je.height,Ve.y=et.y+et.height+20,je.width+m.width+x.width+y.width+3*Ae.width*p*.5);Ve.x=.5*f.width-.5*e}I.start(),I.scaleToWindow(r),gs(),window.addEventListener("resize",e=>{I.scaleToWindow(r),ns(),ps(),ls(),gs()}),document.addEventListener("fullscreenchange",e=>{I.scaleToWindow(r),ns(),(ce=!ce)?t.src=I.assets["images/fullscreen_off_512_over.png"].src:t.src=I.assets["images/fullscreen_on_512_over.png"].src});