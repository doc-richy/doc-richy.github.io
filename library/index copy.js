import{game}from"./library/engine.js";import*as scene from"./library/level.js";import*as moveModule from"./library/move.js";import"./typedef.js";let main=document.getElementById("main"),infoDiv=document.getElementById("infodiv"),aboutDiv=document.getElementById("aboutdiv"),std={scaleCanvas:1,scaleX:1,scaleY:2,boxSize:90,boxViewQuantity:12,scaleFactor:()=>std.boxSize/512},gameInfo={time:void 0,lastTime:void 0,bestTime:void 0,step:void 0,lastStep:void 0,bestStep:void 0,bananas:void 0,lastBananas:void 0,bestBananas:void 0},btn_1=document.getElementById("btn-1"),btn_2=document.getElementById("btn-2"),btn_3=document.getElementById("btn-3"),menu=document.getElementsByClassName("floating-menu")[0],btn_1_img_hide_up_128,btn_1_img_hide_over_128,btn_1_img_show_up_128,btn_1_img_show_over_128,btn_1_img_hide_up_64,btn_1_img_hide_over_64,btn_1_img_show_up_64,btn_1_img_show_over_64,btn_2_img_no_up_128,btn_2_img_no_over_128,btn_2_img_yes_up_128,btn_2_img_yes_over_128,btn_2_img_no_up_64,btn_2_img_no_over_64,btn_2_img_yes_up_64,btn_2_img_yes_over_64,btn_3_img_about_up_128,btn_3_img_about_over_128,btn_3_img_about_up_64,btn_3_img_about_over_64,isSoundOn=!1,gameWidth=1920,gameHeight=1080,cellWidth=90,cellHeight=90,gridWidth=12,gridHeight=12,stepWidth=64,scaleButton=.2,scalePad=.65,estimateKeyboard=[[{s:70,t:15.93,csec:15930},{s:106,t:80.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930}],[{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930}],[{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930},{s:65,t:18.02,csec:15930}]],estimateCell=[[{s:65,t:1918.02},{s:76,t:80.02},{s:65,t:18.02},{s:65,t:18.02},{s:65,t:18.02},{s:65,t:18.02},{s:65,t:18.02},{s:65,t:18.02},{s:65,t:18.02}],[{s:65,t:18.02},{s:65,t:18.02},{s:65,t:18.02},{s:65,t:18.02},{s:65,t:18.02},{s:65,t:18.02},{s:65,t:18.02},{s:65,t:18.02},{s:65,t:18.02}],[{s:65,t:18.02},{s:65,t:18.02},{s:65,t:18.02},{s:65,t:18.02},{s:65,t:18.02},{s:65,t:18.02},{s:65,t:18.02},{s:65,t:18.02},{s:65,t:18.02}]],music,bounceSound,message,titleScene,title,playButton,infoButton,menuShow,menuHide,fullscreenState,menuShowActive=!0,menuHideActive=!1,levelInfoBox,levelMsg,levelUpButton,levelDownButton,levelInfoBoxGroup,sceneInfoBox,sceneMsg,sceneUpButton,sceneDownButton,sceneInfoBoxGroup,blocks,arrayImages,img1,gameScene,img2,img3,blocksImg_12,blocksImg_14,blocksImg_16,infoBox1,msg01,msg1Img,msg1Group,msgGroup,msg11,msg21,msg31,MsgInfo,homeButton,restartButton,nextButton,backButton,infoGameButton,infoBox1Group,infoBox2,msg02,msg2Img,msg2Group,msgGroup2,msg12,msg22,msg32,infoBox2Group,infoBox3,msg03,msg3Img,msg3Group,msgGroup3,msg13,msg23,msg33,infoBox3Group,infoBox4,msg04,msg4Img,msg4Group,msgGroup4,msg14,msg42,msg34,infoBox4Group,groupInfo,infoGamePNG,infoGameMsg,infoGameGroup,yo={},walk=[],stepArray=[],scenePlaying=1,levelPlaying=1,levelToPlay,scaleAllButtons=1,scaleText=1,intervalId=setInterval(()=>g.progressBar.update(),5),intervalAnimation,padDimension=(document.addEventListener("myProper",e=>console.log("From my proper ",e.text)),512),padArray=[],pad_1_back,pad_1_front,pad_1_group,pad_1_up,pad_1_down,pad_1_right,pad_1_left,pad_2_back,pad_2_front,pad_2_group,pad_2_up,pad_2_down,pad_2_right,pad_2_left,isMobile=/Mobile/i.test(navigator.userAgent),pixelRatio=window.devicePixelRatio.toFixed(2),isTouch=void 0,g=("ontouchstart"in document.documentElement&&(isTouch=!0),("ontouchstart"in window||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints)&&(isTouch=!0),"touchstart"in document.documentElement&&(isTouch=!0),isMobile&&(scaleText=3.5<=pixelRatio&&pixelRatio<=4.2?scaleAllButtons=1.2:2.8<=pixelRatio&&pixelRatio<3.5?(scaleAllButtons=1.5,1.2):(scaleAllButtons=1.6,1.5)),new game(gameWidth,gameHeight,setup,["images/walk_512.json","images/info_box.png","images/info_level_box.png","images/view_1920x1024.png","images/view_420x1080.png","images/blocksBorder_12x12.png","images/blocksBorder_14x14.png","images/blocksBorder_16x16.png","images/b_info_up.png","images/b_info_over.png","images/b_scene_up.png","images/b_scene_over.png","images/b_scene_top_up.png","images/b_scene_top_over.png","images/b_play_up.png","images/b_play_over.png","images/infogame.png","img_512/infogame_512_up.png","img_512/infogame_512_over.png","img_512/restart_512_up.png","img_512/restart_512_over.png","img_512/next_512_up.png","img_512/next_512_over.png","img_512/back_512_up.png","img_512/back_512_over.png","img_512/home_512_up.png","img_512/home_512_over.png","img_512/menu_512_up.png","img_512/menu_512_over.png","img_512/menu_open_512_up.png","img_512/menu_open_512_over.png","img_512/road_512.png","img_512/forest_512.png","images/forest.png","images/forest24.jpg","img_512/box_512.png","img_512/bananas_0_512.png","img_512/bananas_512_neutral.png","images/fond_ecran_950.jpg","images/emoji_yo.png","sounds/bounce.wav","sounds/music.wav","fonts/puzzler.otf","pad_img/pad_back.png","img_512/pad_512_front.png","img_512/pad_512_north_up.png","img_512/pad_512_north_over.png","img_512/pad_512_south_up.png","img_512/pad_512_south_over.png","img_512/pad_512_est_up.png","img_512/pad_512_est_over.png","img_512/pad_512_ouest_up.png","img_512/pad_512_ouest_over.png","img_512/step_512_neutral.png","img_512/time_512_neutral.png","img_512/time_512_neutral_empty.png","img_menu/show_up_128.png","img_menu/show_over_128.png","img_menu/hide_up_128.png","img_menu/hide_over_128.png","img_menu/show_up_64.png","img_menu/show_over_64.png","img_menu/hide_up_64.png","img_menu/hide_over_64.png","img_menu/b_sound_yes_up_128.png","img_menu/b_sound_yes_over_128.png","img_menu/b_sound_no_up_128.png","img_menu/b_sound_no_over_128.png","img_menu/b_sound_yes_up_64.png","img_menu/b_sound_yes_over_64.png","img_menu/b_sound_no_up_64.png","img_menu/b_sound_no_over_64.png","img_menu/b_about_up_128.png","img_menu/b_about_over_128.png","img_menu/b_about_up_64.png","img_menu/b_about_over_64.png"],load)),leftArrow=(main.appendChild(g.canvas),window.infoHide=e=>{infoDiv.classList.remove("show"),infoDiv.classList.add("hide")},window.aboutHide=e=>{aboutDiv.classList.remove("show"),aboutDiv.classList.add("hide")},g.keyboard(37)),upArrow=g.keyboard(38),rightArrow=g.keyboard(39),downArrow=g.keyboard(40),keyboard={leftArrow:leftArrow,upArrow:upArrow,rightArrow:rightArrow,downArrow:downArrow};function load(){0===g.progressBar.counter&&(g.progressBar.setBackgroundColor("#FFA80F"),g.progressBar.setForegroundColor("#FFEC4B"),g.progressBar.create(g.canvas,g.assets,g.canvas.width/2,100)),g.progressBar.update()}function setup(){createButtonMenu(),updateCSSVariables(),g.progressBar.remove(),clearInterval(intervalId),arrayImages=[g.assets["walkDownRight.png"],g.assets["img_512/road_512.png"],g.assets["img_512/forest_512.png"],g.assets["img_512/box_512.png"],g.assets["img_512/bananas_0_512.png"],g.assets["walkUpRight.png"],g.assets["walkUpLeft.png"],g.assets["walkUpRightPush.png"],g.assets["walkUpLeftPush.png"],g.assets["walkDownRight.png"],g.assets["walkDownLeft.png"],g.assets["walkDownRightPush.png"],g.assets["walkDownLeftPush.png"],g.assets["walkRightRight.png"],g.assets["walkRightLeft.png"],g.assets["walkRightRightPush.png"],g.assets["walkRightLeftPush.png"],g.assets["walkLeftRight.png"],g.assets["walkLeftLeft.png"],g.assets["walkLeftRightPush.png"],g.assets["walkLeftLeftPush.png"]],yo.setVisible=()=>{walk.forEach(e=>{e===yo.activeSprite?e.visible=!0:(e.visible=!1,e.gridX=-10,e.gridY=-10)})},yo.layer=3,yo.bananasToEat=0,initialiseMusic(),setFirstTime(1,1),buildFirstPage(),buildGroupInfo1(),rightArrow.press=()=>{yo.move("right",blocks,yo,walk),stepArray.push({girdX:this.yo.activeSprite.gridX,gridY:this.yo.activeSprite.gridY,dir:"right"})},upArrow.press=()=>{yo.move("up",blocks,yo,walk),stepArray.push({girdX:this.yo.activeSprite.gridX,gridY:this.yo.activeSprite.gridY,dir:"up"})},leftArrow.press=()=>{yo.move("left",blocks,yo,walk),stepArray.push({girdX:this.yo.activeSprite.gridX,gridY:this.yo.activeSprite.gridY,dir:"left"})},downArrow.press=()=>{yo.move("down",blocks,yo,walk),stepArray.push({girdX:this.yo.activeSprite.gridX,gridY:this.yo.activeSprite.gridY,dir:"down"})},g.setButtonsMove([upArrow,downArrow,rightArrow,leftArrow,pad_1_up,pad_1_down,pad_1_right,pad_1_left,pad_2_up,pad_2_down,pad_2_right,pad_2_left])}function play(){0===yo.bananasToEat&&(g.endGame(),g.pause(),g.wait(1e3).then(()=>end()))}function end(){music.volume=.3,updateGameInfo("end")}function homePress(){console.log("hOME PRESS ")}function restart(){gameInfo.time=0,resetAllParameters(scenePlaying,levelPlaying),g.slide(gameScene,420,0,30,["decelerationCubed"]),g.state=play,g.resume()}function back(){scenePlaying<=3&&1<levelPlaying&&--levelPlaying,resetAllParameters(scenePlaying,levelPlaying),updateFirstPage(scenePlaying,levelPlaying),g.slide(gameScene,420,0,30,["decelerationCubed"]),g.state=play,g.resume()}function next(){scenePlaying<=3&&levelPlaying<9&&(levelPlaying+=1),resetAllParameters(scenePlaying,levelPlaying),updateFirstPage(scenePlaying,levelPlaying),g.slide(gameScene,420,0,30,["decelerationCubed"]),g.state=play,g.resume()}function home(){resetAllParameters(scenePlaying,levelPlaying),updateFirstPage(scenePlaying,levelPlaying),g.slide(groupInfo,-g.canvas.width,g.canvas.height,30,["decelerationCubed"]),g.slide(gameScene,-g.canvas.width,g.canvas.height,30,["decelerationCubed"]),g.slide(titleScene,0,0,30,["decelerationCubed"]),g.endGame(),end()}function resetAllParameters(e,t){if(e<1&&4<e)throw new Error(`This level : ${e} is not developped yet.`);if(1===e){if(t<1&&9<t)throw new Error(`This level : ${t} is not developped yet.`);gridWidth=gridHeight=12}else if(2===e){if(t<1&&9<t)throw new Error(`This levelToSet : ${t} is not developped yet.`);gridWidth=gridHeight=14}else{if(3!==e)throw new Error(`This scene : ${e} is not developped yet.`);if(t<1&&9<t)throw new Error(`This levelToSet : ${t} is not developped yet.`);gridWidth=gridHeight=16}if(levelToPlay=scene.level[e-1][t-1],levelPlaying=t,scenePlaying=e,msg42.content=""+estimateKeyboard[scenePlaying-1][levelPlaying-1].t,gameScene.remove(blocks),yo.bananasToEat=0,blocks=g.gridSpecial(gridWidth,gridHeight,cellWidth,cellHeight,levelToPlay,arrayImages,yo,walk,std.scaleFactor(),!1,0,0),yo.activeSprite=walk[4],yo.setVisible(),(stepArray=[]).push({gridX:yo.activeSprite.gridX,gridY:yo.activeSprite.gridY,dir:"start"}),g.setYo(yo),g.setStepArray(stepArray),g.resetStartTime(void 0),g.setGameInfo(gameInfo),updateGameInfo(),1===scenePlaying)blocksImg_12.visible=!0,blocksImg_14.visible=!1,blocksImg_16.visible=!1,blocks.addChild(blocksImg_12);else if(2===scenePlaying)blocksImg_12.visible=!1,blocksImg_14.visible=!0,blocksImg_16.visible=!1,blocks.addChild(blocksImg_14);else{if(3!==scenePlaying)throw new Error(`Scene playing : ${scenePlaying} not possible.`);blocksImg_12.visible=!1,blocksImg_14.visible=!1,blocksImg_16.visible=!0,blocks.addChild(blocksImg_16)}gameScene.addChild(blocks),gameScene.x=-gameWidth,gameScene.y=gameHeight,moveModule.setScene(e,std)}function setFirstTime(e,t){if(e<1&&3<e)throw new Error(`This level : ${e} is not developped yet.`);if(1===e){if(t<1&&9<t)throw new Error(`This level : ${t} is not developped yet.`);gridWidth=gridHeight=12}else if(2===e){if(t<1&&9<t)throw new Error(`This levelToSet : ${t} is not developped yet.`);gridWidth=gridHeight=14}else{if(3!==e)throw new Error(`This scene : ${e} is not developped yet.`);if(t<1&&9<t)throw new Error(`This levelToSet : ${t} is not developped yet.`);gridWidth=gridHeight=16}if(levelToPlay=scene.level[e-1][t-1],levelPlaying=t,scenePlaying=e,blocks=g.gridSpecial(gridWidth,gridHeight,cellWidth,cellHeight,levelToPlay,arrayImages,yo,walk,std.scaleFactor(),!1,0,0),yo.activeSprite=walk[4],yo.setVisible(),(stepArray=[]).push({gridX:yo.activeSprite.gridX,gridY:yo.activeSprite.gridY}),g.setYo(yo),g.setStepArray(stepArray),g.resetStartTime(void 0),(img1=g.sprite(g.assets["images/forest24.jpg"])).layer=-1,img1.pivotX=0,img1.pivotY=0,blocksImg_12=g.sprite(g.assets["images/blocksBorder_12x12.png"]),blocksImg_14=g.sprite(g.assets["images/blocksBorder_14x14.png"]),blocksImg_16=g.sprite(g.assets["images/blocksBorder_16x16.png"]),blocksImg_12.layer=blocksImg_14.layer=blocksImg_16.layer=4,1===scenePlaying)blocksImg_12.visible=!0,blocksImg_14.visible=!1,blocksImg_16.visible=!1,blocks.addChild(blocksImg_12);else if(2===scenePlaying)blocksImg_12.visible=!1,blocksImg_14.visible=!0,blocksImg_16.visible=!1,blocks.addChild(blocksImg_14);else{if(3!==scenePlaying)throw new Error(`Scene playing : ${scenePlaying} not possible.`);blocksImg_12.visible=!1,blocksImg_14.visible=!1,blocksImg_16.visible=!0,blocks.addChild(blocksImg_16)}gameScene=g.group(img1,blocks);t=Math.max(gameWidth,gameHeight);gameScene.x=-t,gameScene.y=t,gameScene.layer=2,moveModule.setScene(e,std),yo.move=moveModule.moveScene}function initialiseMusic(){bounceSound=g.assets["sounds/bounce.wav"],(music=g.assets["sounds/music.wav"]).loop=!0}function buildFirstPage(){MsgInfo=g.text("First","30px puzzler","red");(title=g.sprite(g.assets["images/fond_ecran_950.jpg"])).x=(g.canvas.width-title.width)/2,title.y=(g.canvas.height-title.height)/2,scenePlaying=scenePlaying||1,levelPlaying=levelPlaying||1;(menuHide=g.button([g.assets["img_512/menu_open_512_up.png"],g.assets["img_512/menu_open_512_over.png"],g.assets["img_512/menu_open_512_up.png"]])).x=10,menuHide.y=10,menuHide.pivotX=0,menuHide.pivotY=0,menuHide.scaleX=scaleButton,menuHide.scaleY=scaleButton,menuHide.layer=5,menuHide.visible=!1,menuHide.interactive=!1,(menuShow=g.button([g.assets["img_512/menu_512_up.png"],g.assets["img_512/menu_512_over.png"],g.assets["img_512/menu_512_up.png"]])).x=10,menuShow.y=10,menuShow.pivotX=0,menuShow.pivotY=0,menuShow.scaleX=scaleButton,menuShow.scaleY=scaleButton,menuShow.layer=5,menuShow.press=()=>{var e;infoGameGroup.visible&&(infoGameGroup.visible=!1,padArray.forEach(e=>e.interactive=!0)),menuHideActive||(g.fadeIn(menuHide,30),e=g.fadeOut(menuShow,30),menu.classList.remove("hide"),menu.classList.add("show"),menuHide.visible=!0,menuShow.visible=!1,e.onComplete=()=>{menuShow.interactive=!1,menuHide.interactive=!0,menuHideActive=!0,menuShowActive=!1})},menuHide.press=()=>{var e;infoGameGroup.visible&&(infoGameGroup.visible=!1,padArray.forEach(e=>e.interactive=!0)),menuShowActive||(g.fadeIn(menuShow,30),e=g.fadeOut(menuHide,30),menu.classList.remove("show"),menu.classList.add("hide"),menuHide.visible=!1,menuShow.visible=!0,e.onComplete=()=>{menuHide.interactive=!1,menuShow.interactive=!0,menuHideActive=!1,menuShowActive=!0})},sceneInfoBox=g.sprite(g.assets["images/info_level_box.png"]),sceneMsg=g.text("12x12","50px puzzler","black",20,40),1===scenePlaying?sceneMsg.content="12x12":2===scenePlaying?sceneMsg.content="14x14":sceneMsg.content="16x16",sceneMsg.x=sceneInfoBox.width/4,sceneMsg.y=sceneInfoBox.height/2-25,(sceneUpButton=g.button([g.assets["images/b_scene_top_up.png"],g.assets["images/b_scene_top_over.png"],g.assets["images/b_scene_top_up.png"]])).x=sceneInfoBox.width/2-sceneUpButton.width/2,sceneUpButton.y=sceneInfoBox.height/4-sceneUpButton.height/2,sceneUpButton.press=()=>{scenePlaying<3&&(resetAllParameters(scenePlaying+=1,levelPlaying),g.slide(sceneMsg,sceneMsg.x,sceneMsg.y-40,10,["smoothstep"]),g.fadeOut(sceneMsg,10),setTimeout(()=>{1===scenePlaying?sceneMsg.content="12x12":2===scenePlaying?sceneMsg.content="14x14":sceneMsg.content="16x16",sceneMsg.y+=80,g.slide(sceneMsg,sceneMsg.x,sceneInfoBox.height/2-25,15,["smoothstep"]),g.fadeIn(sceneMsg,15)},100))},(sceneDownButton=g.button([g.assets["images/b_scene_up.png"],g.assets["images/b_scene_over.png"],g.assets["images/b_scene_up.png"]])).x=sceneInfoBox.width/2-sceneDownButton.width/2,sceneDownButton.y=3*sceneInfoBox.height/4-sceneUpButton.height/2,sceneDownButton.press=()=>{1<scenePlaying&&(resetAllParameters(--scenePlaying,levelPlaying),g.slide(sceneMsg,sceneMsg.x,sceneMsg.y+40,10,["smoothstep"]),g.fadeOut(sceneMsg,10),setTimeout(()=>{1===scenePlaying?sceneMsg.content="12x12":2===scenePlaying?sceneMsg.content="14x14":sceneMsg.content="16x16",sceneMsg.y-=80,g.slide(sceneMsg,sceneMsg.x,sceneInfoBox.height/2-25,15,["smoothstep"]),g.fadeIn(sceneMsg,15)},200))},(sceneInfoBoxGroup=g.group(sceneInfoBox,sceneMsg,sceneUpButton,sceneDownButton)).x=-g.canvas.width,sceneInfoBoxGroup.y=-g.canvas.height,levelInfoBox=g.sprite(g.assets["images/info_level_box.png"]),(levelMsg=g.text("Level "+levelPlaying,"50px puzzler","black",20,40)).x=sceneInfoBox.width/4,levelMsg.y=sceneInfoBox.height/2-25,(levelUpButton=g.button([g.assets["images/b_scene_top_up.png"],g.assets["images/b_scene_top_over.png"],g.assets["images/b_scene_top_up.png"]])).press=()=>{levelPlaying<9&&(levelPlaying+=1,resetAllParameters(scenePlaying,levelPlaying),g.slide(levelMsg,levelMsg.x,levelMsg.y-40,10,["smoothstep"]),g.fadeOut(levelMsg,10),setTimeout(()=>{levelMsg.content="Level "+levelPlaying,levelMsg.y+=80,g.slide(levelMsg,levelMsg.x,levelInfoBox.height/2-25,15,["smoothstep"]),g.fadeIn(levelMsg,15)},100))},levelUpButton.x=levelInfoBox.width/2-levelUpButton.width/2,levelUpButton.y=levelInfoBox.height/4-levelUpButton.height/2,(levelDownButton=g.button([g.assets["images/b_scene_up.png"],g.assets["images/b_scene_over.png"],g.assets["images/b_scene_up.png"]])).x=levelInfoBox.width/2-levelDownButton.width/2,levelDownButton.y=3*levelInfoBox.height/4-levelUpButton.height/2,levelDownButton.press=()=>{1<levelPlaying&&(--levelPlaying,resetAllParameters(scenePlaying,levelPlaying),g.slide(levelMsg,levelMsg.x,levelMsg.y+40,10,["smoothstep"]),g.fadeOut(levelMsg,10),setTimeout(()=>{levelMsg.content="Level "+levelPlaying,levelMsg.y-=80,g.slide(levelMsg,levelMsg.x,levelInfoBox.height/2-25,15,["smoothstep"]),g.fadeIn(levelMsg,15)},100))},levelMsg.y=levelInfoBox.height/2-25,(levelInfoBoxGroup=g.group(levelInfoBox,levelMsg,levelUpButton,levelDownButton)).x=g.canvas.width,levelInfoBoxGroup.y=-g.canvas.height,(infoButton=g.button([g.assets["images/b_info_up.png"],g.assets["images/b_info_over.png"],g.assets["images/b_info_up.png"]])).x=(g.canvas.width-title.width)/4-.5*infoButton.width*scaleAllButtons/2,infoButton.y=gameHeight-infoButton.width,infoButton.scaleX=.5*scaleAllButtons,infoButton.scaleY=.5*scaleAllButtons,infoButton.press=()=>{let e=g.rectangle(10,10,"#F7E9B8");e.pivotX=0,e.pivotY=0,e.x=infoButton.x+infoButton.width/2,e.y=infoButton.y+infoButton.height/2;var t=g.slide(e,e.x,100,30);g.tweenProperty(e,"scaleX",e.scaleX,180,30),g.tweenProperty(e,"scaleY",e.scaleY,80,30);t.onComplete=()=>{infoDiv.classList.remove("hide"),infoDiv.classList.add("show"),updateInfoIframe(),g.remove(e)}},(playButton=g.button([g.assets["images/b_play_up.png"],g.assets["images/b_play_over.png"],g.assets["images/b_play_up.png"]])).x=gameWidth,playButton.y=gameHeight,playButton.scaleX=scaleAllButtons,playButton.scaleY=scaleAllButtons,playButton.press=()=>{MsgInfo.visible=!1,menu.classList.contains("show")&&menuHide.press();gameWidth;g.state=play,1===scenePlaying?sceneMsg.content="12x12":2===scenePlaying?sceneMsg.content="14x14":sceneMsg.content="16x16",levelMsg.content="Level "+levelPlaying,g.slide(titleScene,g.canvas.width,g.canvas.height,30,["decelerationCubed"]),g.slide(gameScene,420,0,30,["decelerationCubed"]),g.slide(groupInfo,0,0,30,["decelerationCubed"]).onComplete=()=>{updatePolygonPoinst()},g.setYo(yo),g.setKeys(keyboard),g.setStepArray(stepArray),g.resetStartTime(void 0),resetAllParameters(scenePlaying,levelPlaying)},g.slide(playButton,g.canvas.width-(g.canvas.width-title.width)/4-playButton.width/2,.75*g.canvas.height-playButton.width/2,30,["decelerationCubed"]),g.slide(sceneInfoBoxGroup,(g.canvas.width-title.width)/4-sceneInfoBoxGroup.width/2,title.y+sceneInfoBoxGroup.height/2,30,["decelerationCubed"]),g.slide(levelInfoBoxGroup,g.canvas.width-(g.canvas.width-title.width)/4-levelInfoBoxGroup.width/2,title.y+levelInfoBoxGroup.height/2,30,["decelerationCubed"]),titleScene=g.group(title,infoButton,playButton,levelInfoBoxGroup,sceneInfoBoxGroup)}function updateFirstPage(e,t){scenePlaying=e,levelPlaying=t,1===scenePlaying?sceneMsg.content="12x12":2===scenePlaying?sceneMsg.content="14x14":sceneMsg.content="16x16",levelMsg.content="Level "+levelPlaying}function updateMsgInfo(){MsgInfo.layer=10,MsgInfo.content="is_M="+isMobile,MsgInfo.content+="|is_T="+isTouch,MsgInfo.content+=`|DPI=${pixelRatio} `,MsgInfo.content+=`|WA=${window.screen.availWidth},HA=`+window.screen.availHeight,MsgInfo.content+=`|WW=${window.innerWidth},WH=`+window.innerHeight,MsgInfo.content+=`|VW=${visualViewport.width},VH=`+visualViewport.height,MsgInfo.content+="|S_C="+std.scaleCanvas.toFixed(2),MsgInfo.content+="|S_X= "+std.scaleX.toFixed(2),MsgInfo.content+="|S_Y= "+std.scaleY.toFixed(2)}function buildGroupInfo1(){infoGamePNG=g.sprite(g.assets["images/infogame.png"]),infoGameGroup=g.group(infoGamePNG);var e="60px puzzler",t="black";(infoGameMsg=[[g.text("First",e,t,355,337),g.text("First",e,t,621,337),g.text("First",e,t,789,337),g.text("First",e,t,1077,337),g.text("First",e,t,1240,337),g.text("First",e,t,1489,337),g.text("First",e,t,1656,337)],[g.text("First",e,t,355,564),g.text("First",e,t,621,564),g.text("First",e,t,789,564),g.text("First",e,t,1077,564),g.text("First",e,t,1240,564),g.text("First",e,t,1489,564),g.text("First",e,t,1656,564)],[g.text("First",e,t,355,786),g.text("First",e,t,621,786),g.text("First",e,t,789,786),g.text("First",e,t,1077,786),g.text("First",e,t,1240,786),g.text("First",e,t,1489,786),g.text("First",e,t,1656,786)]]).forEach(e=>{e.forEach(e=>{e.pivotX=e.pivotY=.5})}),infoGameMsg[0][0].content="23.82",infoGameMsg[0][1].content="=";for(let t=0;t<3;t++)for(let e=0;e<7;e++)infoGameGroup.add(infoGameMsg[t][e]);infoGameGroup.visible=!1,infoGameGroup.x=(g.canvas.width-1888)/2,infoGameGroup.y=menuShow.y+menuShow.height*scaleButton+10,(homeButton=g.button([g.assets["img_512/home_512_up.png"],g.assets["img_512/home_512_over.png"],g.assets["img_512/home_512_up.png"]])).press=()=>{infoGameGroup.visible&&(infoGameGroup.visible=!1,padArray.forEach(e=>e.interactive=!0)),resetAllParameters(scenePlaying,levelPlaying),updateFirstPage(scenePlaying,levelPlaying),g.slide(groupInfo,-g.canvas.width,g.canvas.height,30,["decelerationCubed"]),g.slide(gameScene,-g.canvas.width,g.canvas.height,30,["decelerationCubed"]).onComplete=()=>{updatePolygonPoinst()},g.slide(titleScene,0,0,30,["decelerationCubed"]),g.endGame(),homePress()},homeButton.x=g.canvas.width-1.1*homeButton.width*scaleButton,homeButton.y=10,homeButton.scaleX=scaleButton,homeButton.scaleY=scaleButton,(infoGameButton=g.button([g.assets["img_512/infogame_512_up.png"],g.assets["img_512/infogame_512_over.png"],g.assets["img_512/infogame_512_up.png"]])).press=()=>{infoGameGroup.visible?(infoGameGroup.visible=!1,padArray.forEach(e=>e.interactive=!0)):(infoGameGroup.visible=!0,updateGameInfo(),padArray.forEach(e=>e.interactive=!1))},infoGameButton.x=homeButton.x-1.1*infoGameButton.width*scaleButton,infoGameButton.y=10,infoGameButton.scaleX=scaleButton,infoGameButton.scaleY=scaleButton,(nextButton=g.button([g.assets["img_512/next_512_up.png"],g.assets["img_512/next_512_over.png"],g.assets["img_512/next_512_up.png"]])).press=()=>next(),infoGameGroup.visible&&(infoGameGroup.visible=!1,padArray.forEach(e=>e.interactive=!0)),nextButton.x=infoGameButton.x-1.1*nextButton.width*scaleButton,nextButton.y=10,nextButton.scaleX=scaleButton,nextButton.scaleY=scaleButton,(restartButton=g.button([g.assets["img_512/restart_512_up.png"],g.assets["img_512/restart_512_over.png"],g.assets["img_512/restart_512_up.png"]])).press=()=>{infoGameGroup.visible&&(infoGameGroup.visible=!1,padArray.forEach(e=>e.interactive=!0)),restart()},restartButton.x=menuShow.x+1.1*menuShow.width*scaleButton,restartButton.y=10,restartButton.scaleX=scaleButton,restartButton.scaleY=scaleButton,(backButton=g.button([g.assets["img_512/back_512_up.png"],g.assets["img_512/back_512_over.png"],g.assets["img_512/back_512_up.png"]])).press=()=>{infoGameGroup.visible&&(infoGameGroup.visible=!1),back()},backButton.x=restartButton.x+1.1*backButton.width*scaleButton,backButton.y=10,backButton.scaleX=scaleButton,backButton.scaleY=scaleButton,img2=g.sprite(g.assets["images/view_420x1080.png"]),(img3=g.sprite(g.assets["images/view_420x1080.png"])).x=1500,(infoBox1=g.sprite(g.assets["img_512/step_512_neutral.png"])).x=0,infoBox1.y=0,infoBox1.scaleX=scaleButton,infoBox1.scaleY=scaleButton;(msg11=g.text(" : "+(stepArray.length-1),"60px puzzler","black")).content=""+(stepArray.length-1),msg11.x=infoBox1.width*scaleButton+10,msg11.y=infoBox1.height*scaleButton/2-30,msg11.pivotX=0,msg11.pivotY=0,msg11.scaleX=scaleText,msg11.scaleY=scaleText,g.pushMessage(msg11),(infoBox2=g.sprite(g.assets["img_512/time_512_neutral.png"])).x=0,infoBox2.y=0,infoBox2.scaleX=scaleButton,infoBox2.scaleY=scaleButton,(msg21=g.text(" : ","60px puzzler","black")).content=" : .....",msg21.x=infoBox2.width*scaleButton+10,msg21.y=infoBox2.height*scaleButton/2-30,msg21.pivotX=0,msg21.pivotY=0,msg21.scaleX=scaleText,msg21.scaleY=scaleText,g.pushMessage(msg21),(infoBox3=g.sprite(g.assets["img_512/bananas_512_neutral.png"])).x=0,infoBox3.y=0,infoBox3.scaleX=scaleButton,infoBox3.scaleY=scaleButton,(msg31=g.text(" : "+yo.bananasToEat,"60px puzzler","black")).content=" : "+yo.bananasToEat,msg31.x=infoBox3.width*scaleButton+10,msg31.y=infoBox3.height*scaleButton/2-30,msg31.pivotX=0,msg31.pivotY=0,msg31.scaleX=scaleText,msg31.scaleY=scaleText,g.pushMessage(msg31),(infoBox4=g.sprite(g.assets["img_512/time_512_neutral_empty.png"])).x=0,infoBox4.y=0,infoBox4.scaleX=scaleButton,infoBox4.scaleY=scaleButton,(msg42=g.text("","60px puzzler","black")).content=""+estimateKeyboard[scenePlaying-1][levelPlaying-1].t,msg42.x=infoBox2.width*scaleButton+10,msg42.y=infoBox2.height*scaleButton/2-30,msg42.pivotX=0,msg42.pivotY=0,msg42.scaleX=scaleText,msg42.scaleY=scaleText,updateMsgInfo(),(infoBox1Group=g.group(infoBox1,msg11)).x=0,infoBox1Group.y=0,(infoBox2Group=g.group(infoBox2,msg21)).x=0,infoBox2Group.y=0,(infoBox3Group=g.group(infoBox3,msg31)).x=0,infoBox3Group.y=infoBox1Group.height*scaleButton*1.1+infoBox1Group.y,(infoBox4Group=g.group(infoBox4,msg42)).x=0,infoBox4Group.y=infoBox2Group.height*scaleButton*1.1+infoBox2Group.y,(pad_1_up=g.button([g.assets["img_512/pad_512_north_up.png"],g.assets["img_512/pad_512_north_over.png"],g.assets["img_512/pad_512_north_up.png"]],[])).press=()=>{yo.move("up",blocks,yo,walk),stepArray.push({girdX:yo.activeSprite.gridX,gridY:yo.activeSprite.gridY})},(pad_1_down=g.button([g.assets["img_512/pad_512_south_up.png"],g.assets["img_512/pad_512_south_over.png"],g.assets["img_512/pad_512_south_up.png"]],[])).press=()=>{yo.move("down",blocks,yo,walk),stepArray.push({girdX:yo.activeSprite.gridX,gridY:yo.activeSprite.gridY})},(pad_1_right=g.button([g.assets["img_512/pad_512_est_up.png"],g.assets["img_512/pad_512_est_over.png"],g.assets["img_512/pad_512_est_up.png"]],[])).press=()=>{yo.move("right",blocks,yo,walk),stepArray.push({girdX:yo.activeSprite.gridX,gridY:yo.activeSprite.gridY})},(pad_1_left=g.button([g.assets["img_512/pad_512_ouest_up.png"],g.assets["img_512/pad_512_ouest_over.png"],g.assets["img_512/pad_512_ouest_up.png"]],[])).press=()=>{yo.move("left",blocks,yo,walk),stepArray.push({girdX:yo.activeSprite.gridX,gridY:yo.activeSprite.gridY})},(pad_1_group=g.group(pad_1_up,pad_1_down,pad_1_right,pad_1_left)).x=10,pad_1_group.y=g.canvas.height/2-pad_1_group.height/4*scalePad,pad_1_group.scaleX=pad_1_group.scaleY=scalePad,(pad_2_up=g.button([g.assets["img_512/pad_512_north_up.png"],g.assets["img_512/pad_512_north_over.png"],g.assets["img_512/pad_512_north_up.png"]],[])).press=()=>{yo.move("up",blocks,yo,walk),stepArray.push({girdX:yo.activeSprite.gridX,gridY:yo.activeSprite.gridY})},(pad_2_down=g.button([g.assets["img_512/pad_512_south_up.png"],g.assets["img_512/pad_512_south_over.png"],g.assets["img_512/pad_512_south_up.png"]],[])).press=()=>{yo.move("down",blocks,yo,walk),stepArray.push({girdX:yo.activeSprite.gridX,gridY:yo.activeSprite.gridY})},(pad_2_right=g.button([g.assets["img_512/pad_512_est_up.png"],g.assets["img_512/pad_512_est_over.png"],g.assets["img_512/pad_512_est_up.png"]],[])).press=()=>{yo.move("right",blocks,yo,walk),stepArray.push({girdX:yo.activeSprite.gridX,gridY:yo.activeSprite.gridY})},(pad_2_left=g.button([g.assets["img_512/pad_512_ouest_up.png"],g.assets["img_512/pad_512_ouest_over.png"],g.assets["img_512/pad_512_ouest_up.png"]],[])).press=()=>{yo.move("left",blocks,yo,walk),stepArray.push({girdX:yo.activeSprite.gridX,gridY:yo.activeSprite.gridY})},(pad_2_group=g.group(pad_2_up,pad_2_down,pad_2_right,pad_2_left)).x=g.canvas.width-pad_2_group.width*scalePad-10,pad_2_group.y=g.canvas.height/2-pad_2_group.height/4*scalePad,pad_2_group.scaleX=scalePad,pad_2_group.scaleY=scalePad,padArray.push(pad_1_up,pad_1_down,pad_1_right,pad_1_left,pad_2_up,pad_2_down,pad_2_right,pad_2_left),(msgGroup=g.group(infoBox1Group,infoBox3Group)).x=10,msgGroup.y=1.1*menuShow.height*scaleButton,(msgGroup2=g.group(infoBox2Group,infoBox4Group)).x=g.canvas.width-img2.width+10,msgGroup2.y=1.1*infoGameButton.height*scaleButton,(groupInfo=g.group(img2,img3,msgGroup,msgGroup2,homeButton,infoGameButton,restartButton,nextButton,backButton,pad_1_group,pad_2_group,infoGameGroup)).layer=4,groupInfo.x=-g.canvas.width,updatePolygonPoinst()}function updatePolygonPoinst(){var e=padDimension*scalePad;pad_1_up.points=[{x:pad_1_group.gx+.44*e,y:pad_1_group.gy+.37*e},{x:pad_1_group.gx+.347*e,y:pad_1_group.gy+.195*e},{x:pad_1_group.gx+.506*e,y:pad_1_group.gy+0*e},{x:pad_1_group.gx+.658*e,y:pad_1_group.gy+.195*e},{x:pad_1_group.gx+.58*e,y:pad_1_group.gy+.37*e}],pad_1_down.points=[{x:pad_1_group.gx+.436*e,y:pad_1_group.gy+.63*e},{x:pad_1_group.gx+.574*e,y:pad_1_group.gy+.63*e},{x:pad_1_group.gx+.664*e,y:pad_1_group.gy+.797*e},{x:pad_1_group.gx+.504*e,y:pad_1_group.gy+e},{x:pad_1_group.gx+.35*e,y:pad_1_group.gy+.797*e}],pad_1_right.points=[{x:pad_1_group.gx+.629*e,y:pad_1_group.gy+.418*e},{x:pad_1_group.gx+.805*e,y:pad_1_group.gy+.338*e},{x:pad_1_group.gx+e,y:pad_1_group.gy+.496*e},{x:pad_1_group.gx+.805*e,y:pad_1_group.gy+.65*e},{x:pad_1_group.gx+.629*e,y:pad_1_group.gy+.566*e}],pad_1_left.points=[{x:pad_1_group.gx+0*e,y:pad_1_group.gy+.494*e},{x:pad_1_group.gx+.203*e,y:pad_1_group.gy+.336*e},{x:pad_1_group.gx+.371*e,y:pad_1_group.gy+.414*e},{x:pad_1_group.gx+.371*e,y:pad_1_group.gy+.566*e},{x:pad_1_group.gx+.203*e,y:pad_1_group.gy+.65*e}],pad_2_up.points=[{x:pad_2_group.gx+.44*e,y:pad_2_group.gy+.37*e},{x:pad_2_group.gx+.347*e,y:pad_2_group.gy+.195*e},{x:pad_2_group.gx+.506*e,y:pad_2_group.gy+0*e},{x:pad_2_group.gx+.658*e,y:pad_2_group.gy+.195*e},{x:pad_2_group.gx+.58*e,y:pad_2_group.gy+.37*e}],pad_2_down.points=[{x:pad_2_group.gx+.436*e,y:pad_2_group.gy+.63*e},{x:pad_2_group.gx+.574*e,y:pad_2_group.gy+.63*e},{x:pad_2_group.gx+.664*e,y:pad_2_group.gy+.797*e},{x:pad_2_group.gx+.504*e,y:pad_2_group.gy+e},{x:pad_2_group.gx+.35*e,y:pad_2_group.gy+.797*e}],pad_2_right.points=[{x:pad_2_group.gx+.629*e,y:pad_2_group.gy+.418*e},{x:pad_2_group.gx+.805*e,y:pad_2_group.gy+.338*e},{x:pad_2_group.gx+e,y:pad_2_group.gy+.496*e},{x:pad_2_group.gx+.805*e,y:pad_2_group.gy+.65*e},{x:pad_2_group.gx+.629*e,y:pad_2_group.gy+.566*e}],pad_2_left.points=[{x:pad_2_group.gx+0*e,y:pad_2_group.gy+.494*e},{x:pad_2_group.gx+.203*e,y:pad_2_group.gy+.336*e},{x:pad_2_group.gx+.371*e,y:pad_2_group.gy+.414*e},{x:pad_2_group.gx+.371*e,y:pad_2_group.gy+.566*e},{x:pad_2_group.gx+.203*e,y:pad_2_group.gy+.65*e}]}function setResart(){}function putBackgroundCanvas(e,t,s,n,o){g.canvas.style.background=`url(${e}) no-repeat`,g.canvas.style.backgroundPosition=t+`px ${s}px`,g.canvas.style.backgroundSize=n+`px ${o}px`}function pixelToVw(e){return(e/window.innerWidth*100).toFixed(2)}function pixelToVh(e){return(e/window.innerHeight*100).toFixed(2)}function updateCSSVariables(){var e=document.querySelector(":root");getComputedStyle(e);let t="128px",s="128",n=150,o="10px",i="20px";isMobile&&(t="64px",s="64px",n=40,o="2px",i="5px");var a=g.canvas.offsetTop+n+"px";e.style.setProperty("--btn-width",t),e.style.setProperty("--btn-height",s),e.style.setProperty("--menu-top",a),e.style.setProperty("--menu-gap",o),e.style.setProperty("--border-iframe",i)}function updateInfoIframe(){var e=g.canvas.offsetTop+.05*g.canvas.height*std.scaleY,t=.9*(window.innerHeight-e);let s=.85*g.canvas.width*std.scaleX;var n=document.getElementById("infoframe").contentWindow.document.querySelector(":root");isMobile?(n.style.setProperty("--font-size-text","15px"),n.style.setProperty("--font-size-title","15px"),n.style.setProperty("--font-size-button","12px"),n.style.setProperty("--btn-width","60px"),n.style.setProperty("--bnt-height","25px"),menu.classList.contains("show")?infoDiv.style.marginLeft="84px":(infoDiv.style.marginLeft="10px",s=.98*g.canvas.width*std.scaleX)):(n.style.setProperty("--font-size-text","20px"),n.style.setProperty("--font-size-title","30px"),n.style.setProperty("--font-size-button","20px"),n.style.setProperty("--btn-width","100px"),n.style.setProperty("--bnt-height","40px"),menu.classList.contains("show")?infoDiv.style.marginLeft="148px":(infoDiv.style.marginLeft="20px",s=.98*g.canvas.width*std.scaleX)),infoDiv.style.top=e+"px",infoDiv.style.width=s+"px",infoDiv.style.height=t+"px"}function updateAboutIframe(){var e=g.canvas.offsetTop+.05*g.canvas.height*std.scaleY,t=.9*(window.innerHeight-e);let s=.85*g.canvas.width*std.scaleX;var n=document.getElementById("aboutframe").contentWindow.document.querySelector(":root");isMobile?(n.style.setProperty("--font-size-text","15px"),n.style.setProperty("--font-size-title","15px"),n.style.setProperty("--font-size-button","12px"),n.style.setProperty("--btn-width","60px"),n.style.setProperty("--bnt-height","25px"),menu.classList.contains("show")?aboutDiv.style.marginLeft="84px":(aboutDiv.style.marginLeft="10px",s=.98*g.canvas.width*std.scaleX)):(n.style.setProperty("--font-size-text","20px"),n.style.setProperty("--font-size-title","30px"),n.style.setProperty("--font-size-button","20px"),n.style.setProperty("--btn-width","100px"),n.style.setProperty("--bnt-height","40px"),menu.classList.contains("show")?aboutDiv.style.marginLeft="148px":(aboutDiv.style.marginLeft="20px",s=.98*g.canvas.width*std.scaleX)),aboutDiv.style.top=e+"px",aboutDiv.style.width=s+"px",aboutDiv.style.height=t+"px"}function createButtonMenu(){btn_1_img_show_up_128=g.assets["img_menu/show_up_128.png"],btn_1_img_show_over_128=g.assets["img_menu/show_over_128.png"],btn_1_img_hide_up_128=g.assets["img_menu/hide_up_128.png"],btn_1_img_hide_over_128=g.assets["img_menu/hide_over_128.png"],btn_1_img_show_up_64=g.assets["img_menu/show_up_64.png"],btn_1_img_show_over_64=g.assets["img_menu/show_over_64.png"],btn_1_img_hide_up_64=g.assets["img_menu/hide_up_64.png"],btn_1_img_hide_over_64=g.assets["img_menu/hide_over_64.png"],btn_2_img_yes_up_128=g.assets["img_menu/b_sound_yes_up_128.png"],btn_2_img_yes_over_128=g.assets["img_menu/b_sound_yes_over_128.png"],btn_2_img_no_up_128=g.assets["img_menu/b_sound_no_up_128.png"],btn_2_img_no_over_128=g.assets["img_menu/b_sound_no_over_128.png"],btn_2_img_yes_up_64=g.assets["img_menu/b_sound_yes_up_64.png"],btn_2_img_yes_over_64=g.assets["img_menu/b_sound_yes_over_64.png"],btn_2_img_no_up_64=g.assets["img_menu/b_sound_no_up_64.png"],btn_2_img_no_over_64=g.assets["img_menu/b_sound_no_over_64.png"],btn_3_img_about_up_128=g.assets["img_menu/b_about_up_128.png"],btn_3_img_about_over_128=g.assets["img_menu/b_about_over_128.png"],btn_3_img_about_up_64=g.assets["img_menu/b_about_up_64.png"],btn_3_img_about_over_64=g.assets["img_menu/b_about_over_64.png"],btn_1.src=btn_1_img_show_up_128.src,btn_2.src=btn_2_img_no_up_128.src,btn_3.src=btn_3_img_about_up_128.src,btn_1.onclick=()=>{document.fullscreenElement?(document.exitFullscreen(),isMobile?btn_1.src=btn_1_img_show_up_64.src:btn_1.src=btn_1_img_show_up_128.src):(main.requestFullscreen().catch(e=>console.log(e)),isMobile?btn_1.src=btn_1_img_hide_up_64.src:btn_1.src=btn_1_img_hide_up_128.src)},btn_1.ontouchstart=()=>{document.fullscreenElement?(document.exitFullscreen(),isMobile?btn_1.src=btn_1_img_show_up_64.src:btn_1.src=btn_1_img_show_up_128.src):(main.requestFullscreen().catch(e=>console.log(e)),isMobile?btn_1.src=btn_1_img_hide_up_64.src:btn_1.src=btn_1_img_hide_up_128.src)},btn_1.addEventListener("mouseover",()=>{fullscreenState?isMobile?btn_1.src=btn_1_img_hide_over_64.src:btn_1.src=btn_1_img_hide_over_128.src:isMobile?btn_1.src=btn_1_img_show_over_64.src:btn_1.src=btn_1_img_show_over_128.src}),btn_1.addEventListener("mouseleave",()=>{fullscreenState?isMobile?btn_1.src=btn_1_img_hide_up_64.src:btn_1.src=btn_1_img_hide_up_128.src:isMobile?btn_1.src=btn_1_img_show_up_64.src:btn_1.src=btn_1_img_show_up_128.src}),btn_2.onclick=()=>{(isSoundOn=!isSoundOn)?btn_2.src=(isMobile?btn_2_img_yes_up_64:btn_2_img_yes_up_128).src:btn_2.src=(isMobile?btn_2_img_no_up_64:btn_2_img_no_up_128).src},btn_2.ontouchstart=()=>{(isSoundOn=!isSoundOn)?btn_2.src=(isMobile?btn_2_img_yes_up_64:btn_2_img_yes_up_128).src:btn_2.src=(isMobile?btn_2_img_no_up_64:btn_2_img_no_up_128).src},btn_2.addEventListener("mouseover",()=>{isSoundOn?btn_2.src=(isMobile?btn_2_img_yes_over_64:btn_2_img_yes_over_128).src:btn_2.src=(isMobile?btn_2_img_no_over_64:btn_2_img_no_over_128).src}),btn_2.addEventListener("mouseleave",()=>{isSoundOn?btn_2.src=(isMobile?btn_2_img_yes_up_64:btn_2_img_yes_up_128).src:btn_2.src=(isMobile?btn_2_img_no_up_64:btn_2_img_no_up_128).src}),btn_3.onclick=()=>{btn_3.src=(isMobile?btn_3_img_about_up_64:btn_3_img_about_up_128).src;let e=g.rectangle(10,10,"#F7E9B8");e.pivotX=0,e.pivotY=0,e.x=infoButton.x+infoButton.width/2,e.y=infoButton.y+infoButton.height/2;var t=g.slide(e,e.x,100,30);g.tweenProperty(e,"scaleX",e.scaleX,180,30),g.tweenProperty(e,"scaleY",e.scaleY,80,30);t.onComplete=()=>{aboutDiv.classList.add("show"),updateAboutIframe(),g.remove(e)}},btn_3.ontouchstart=()=>{btn_3.src=(isMobile?btn_3_img_about_up_64:btn_3_img_about_up_128).src;let e=g.rectangle(10,10,"#F7E9B8");e.pivotX=0,e.pivotY=0,e.x=infoButton.x+infoButton.width/2,e.y=infoButton.y+infoButton.height/2;var t=g.slide(e,e.x,100,30);g.tweenProperty(e,"scaleX",e.scaleX,180,30),g.tweenProperty(e,"scaleY",e.scaleY,80,30);t.onComplete=()=>{aboutDiv.classList.add("show"),updateAboutIframe(),g.remove(e)}},btn_3.addEventListener("mouseover",()=>{btn_3.src=(isMobile?btn_3_img_about_over_64:btn_3_img_about_over_128).src}),btn_3.addEventListener("mouseleave",()=>{btn_3.src=(isMobile?btn_3_img_about_up_64:btn_3_img_about_up_128).src})}function updateGameInfo(e){var t={};let s=JSON.parse(localStorage.getItem("data"+scenePlaying+levelPlaying));function g(e){var e=(e/1e3).toFixed(2),t=e.toString().substring(e.toString().indexOf(".")+1),e=Math.floor(e),s=Math.floor(e/60);let n="0",o=9<s?"":"0";return 9<e%60&&(n=""),s<=0?""+n+e%60+"."+t:""+o+s+`:${n}${e%60}.`+t}function n(e,t){var s,n,o,i;0===e?(infoGameMsg[e][0].content=g(t.first),infoGameMsg[e][0].x=415-15*g(t.first).length,s=+(t.first/1e3).toFixed(2),n=+(t.second/1e3).toFixed(2),o=+(t.third/1e3).toFixed(2),i=+(t.fourth/1e3).toFixed(2),infoGameMsg[e][1].content=s==n?"=":s<n?"<":">",infoGameMsg[e][2].content=g(t.second),infoGameMsg[e][2].x=864-15*g(t.second).length,infoGameMsg[e][3].content=n==o?"=":n<o?"<":">",infoGameMsg[e][4].content=g(t.third),infoGameMsg[e][4].x=1300-15*g(t.third).length,infoGameMsg[e][5].content=o==i?"=":o<i?"<":">",infoGameMsg[e][6].content=g(t.fourth),infoGameMsg[e][6].x=1716-15*g(t.fourth).length):(infoGameMsg[e][0].content=t.first.toString(),infoGameMsg[e][0].x=415-15*t.first.toString().length,t.first===t.second?infoGameMsg[e][1].content="=":t.first<t.second?infoGameMsg[e][1].content="<":infoGameMsg[e][1].content=">",infoGameMsg[e][2].content=t.second.toString(),infoGameMsg[e][2].x=864-15*t.second.toString().length,t.second===t.third?infoGameMsg[e][3].content="=":t.second<t.third?infoGameMsg[e][3].content="<":infoGameMsg[e][3].content=">",infoGameMsg[e][4].content=t.third.toString(),infoGameMsg[e][4].x=1300-15*t.third.toString().length,t.third===t.fourth?infoGameMsg[e][5].content="=":t.third<t.fourth?infoGameMsg[e][5].content="<":infoGameMsg[e][5].content=">",infoGameMsg[e][6].content=t.fourth.toString(),infoGameMsg[e][6].x=1716-15*t.fourth.toString().length)}s=s||{time:void 0,lastTime:void 0,bestTime:void 0,step:void 0,lastStep:void 0,bestStep:void 0,bananas:void 0,lastBananas:void 0,bestBananas:void 0},"end"===e?(gameInfo.lastTime=s.time||gameInfo.time,gameInfo.lastStep=s.step||gameInfo.step,gameInfo.lastBananas=s.bananas||gameInfo.bananas,gameInfo.bestTime=Math.min(gameInfo.time,s.bestTime||gameInfo.time),gameInfo.bestStep=Math.min(gameInfo.step,s.bestStep||gameInfo.step),gameInfo.bestBananas=Math.min(gameInfo.bananas,s.bestBananas||gameInfo.bananas),t.first=gameInfo.lastTime||-1,t.second=gameInfo.time||-1,t.third=gameInfo.bestTime||-1,t.fourth=estimateKeyboard[scenePlaying-1][levelPlaying-1].csec,n(0,t),t.first=gameInfo.lastStep||-1,t.second=gameInfo.step||-1,t.third=gameInfo.bestStep||-1,t.fourth=estimateKeyboard[scenePlaying-1][levelPlaying-1].s,n(1,t),t.first=gameInfo.lastBananas||-1,t.second=gameInfo.bananas||yo.bananasToEat,t.third=s.bestBananas||-1,t.fourth=0,n(2,t),localStorage.setItem("data"+scenePlaying+levelPlaying,JSON.stringify(gameInfo))):(1e3<gameInfo.time&&(gameInfo.bestTime=Math.min(gameInfo.time,s.bestTime||gameInfo.time)),gameInfo.bestStep=Math.min(gameInfo.step,s.bestStep||gameInfo.step),gameInfo.bestBananas=Math.min(gameInfo.bananas,s.bestBananas||gameInfo.bananas),t.first=s.time||0,t.second=gameInfo.time||0,t.third=s.bestTime||0,t.fourth=estimateKeyboard[scenePlaying-1][levelPlaying-1].csec,n(0,t),t.first=s.step||0,t.second=gameInfo.step||0,t.third=s.bestStep||0,t.fourth=estimateKeyboard[scenePlaying-1][levelPlaying-1].s,n(1,t),t.first=s.bananas||0,t.second=gameInfo.bananas||yo.bananasToEat,t.third=s.bestBananas||0,t.fourth=0,n(2,t))}g.start(),g.scaleToWindow(std),window.addEventListener("resize",e=>{g.scaleToWindow(std),updateMsgInfo(),updateCSSVariables(),updateInfoIframe(),updateAboutIframe()}),document.addEventListener("fullscreenchange",e=>{g.scaleToWindow(std),updateMsgInfo(),fullscreenState=!fullscreenState});