import*as R from"./tweens.js";import*as U from"./sounds.js";import*as W from"./gamesounds.js";import"./typedef.js";let Z=void 0,ee=void 0,te=void 0,ie=void 0,re=!1,ae;function e(e,t){if(Z=e,te=t.boxSize,ie=t,1===Z)ee=12;else if(2===Z)ee=14;else{if(3!==Z)throw new Error(`This data: ${Z} is not allowed for scene.`);ee=16}}function t(e){re=e}function i(e){(ae=e).loop=!1}function r(a,o,p,e){let V,j,c,n,k,$,s,v,q,B,D,d,G,H,J,l;V=e[0],j=e[1],c=e[2],n=e[3],k=e[4],$=e[5],s=e[6],v=e[7],q=e[8],B=e[9],D=e[10],d=e[11],G=e[12],H=e[13],J=e[14],l=e[15];let S,y,g,t,i,K,b,x,X,r,Y,L,h,w,f,m,P,O,z,u,F,I,M,Q;if(Z&&1===Z)"right"===a?(S=o.children.filter(e=>e.gridX===p.activeSprite.gridX+1&&e.gridY===p.activeSprite.gridY),y=o.children.filter(e=>e.gridX===p.activeSprite.gridX+2&&e.gridY===p.activeSprite.gridY),t=S[0],i=y[0],t?"road"===t.type||"bananas"===t.type?T("road",t,i):"box"===t.type&&i&&"road"===i.type?T("box",t,i):"box"===t.type&&i&&"bananas"===i.type?T("bananas",t,i):N():N()):"left"===a?(b=o.children.filter(e=>e.gridX===p.activeSprite.gridX-1&&e.gridY===p.activeSprite.gridY),x=o.children.filter(e=>e.gridX===p.activeSprite.gridX-2&&e.gridY===p.activeSprite.gridY),r=b[0],Y=x[0],r?"road"===r.type||"bananas"===r.type?E("road",r,Y):"box"===r.type&&Y&&"road"===Y.type?E("box",r,Y):"box"===r.type&&Y&&"bananas"===Y.type?E("bananas",r,Y):N():N()):"up"===a?(h=o.children.filter(e=>e.gridX===p.activeSprite.gridX&&e.gridY===p.activeSprite.gridY-1),w=o.children.filter(e=>e.gridX===p.activeSprite.gridX&&e.gridY===p.activeSprite.gridY-2),m=h[0],P=w[0],m?"road"===m.type||"bananas"===m.type?_("road",m,P):"box"===m.type&&P&&"road"===P.type?_("box",m,P):"box"===m.type&&P&&"bananas"===P.type?_("bananas",m,P):N():N()):"down"===a&&(z=o.children.filter(e=>e.gridX===p.activeSprite.gridX&&e.gridY===p.activeSprite.gridY+1),u=o.children.filter(e=>e.gridX===p.activeSprite.gridX&&e.gridY===p.activeSprite.gridY+2),I=z[0],M=u[0],I?"road"===I.type||"bananas"===I.type?C("road",I,M):"box"===I.type&&M&&"road"===M.type?C("box",I,M):"box"===I.type&&M&&"bananas"===M.type?C("bananas",I,M):N():N());else{if(!(Z&&1<Z))throw new Error("The scene is not define properly =>>> "+Z);"right"===a?(S=o.children.filter(e=>e.gridX===p.activeSprite.gridX+1&&e.gridY===p.activeSprite.gridY),y=o.children.filter(e=>e.gridX===p.activeSprite.gridX+2&&e.gridY===p.activeSprite.gridY),g=o.children.filter(e=>e.gridX===p.activeSprite.gridX+3&&e.gridY===p.activeSprite.gridY),t=S[0],i=y[0],K=g[0],t?"road"===t.type||"bananas"===t.type?T("road",t,i):"box"===t.type&&i?"road"===i.type?T("box",t,i):"bananas"===i.type?T("bananas",t,i):"box"===i.type&&K?"road"===K.type?T("2boxes",t,i):"bananas"===K.type?T("2boxesbananas",t,i):N():N():N():N()):"left"===a?(b=o.children.filter(e=>e.gridX===p.activeSprite.gridX-1&&e.gridY===p.activeSprite.gridY),x=o.children.filter(e=>e.gridX===p.activeSprite.gridX-2&&e.gridY===p.activeSprite.gridY),X=o.children.filter(e=>e.gridX===p.activeSprite.gridX-3&&e.gridY===p.activeSprite.gridY),r=b[0],Y=x[0],L=X[0],r?"road"===r.type||"bananas"===r.type?E("road",r,Y):"box"===r.type&&Y?"road"===Y.type?E("box",r,Y):"bananas"===Y.type?E("bananas",r,Y):"box"===Y.type&&L?"road"===L.type?E("2boxes",r,Y):"bananas"===L.type?E("2boxesbananas",r,Y):N():N():N():N()):"up"===a?(h=o.children.filter(e=>e.gridX===p.activeSprite.gridX&&e.gridY===p.activeSprite.gridY-1),w=o.children.filter(e=>e.gridX===p.activeSprite.gridX&&e.gridY===p.activeSprite.gridY-2),f=o.children.filter(e=>e.gridX===p.activeSprite.gridX&&e.gridY===p.activeSprite.gridY-3),m=h[0],P=w[0],O=f[0],m?"road"===m.type||"bananas"===m.type?_("road",m,P):"box"===m.type&&P?"road"===P.type?_("box",m,P):"bananas"===P.type?_("bananas",m,P):"box"===P.type&&O?"road"===O.type?_("2boxes",m,P):"bananas"===O.type?_("2boxesbananas",m,P):N():N():N():N()):"down"===a&&(z=o.children.filter(e=>e.gridX===p.activeSprite.gridX&&e.gridY===p.activeSprite.gridY+1),u=o.children.filter(e=>e.gridX===p.activeSprite.gridX&&e.gridY===p.activeSprite.gridY+2),F=o.children.filter(e=>e.gridX===p.activeSprite.gridX&&e.gridY===p.activeSprite.gridY+3),I=z[0],M=u[0],Q=F[0],I?"road"===I.type||"bananas"===I.type?C("road",I,M):"box"===I.type&&M?"road"===M.type?C("box",I,M):"bananas"===M.type?C("bananas",I,M):"box"===M.type&&Q?"road"===Q.type?C("2boxes",I,M):"bananas"===Q.type?C("2boxesbananas",I,M):N():N():N():N())}function T(e,t,i){var r;1<Z&&5<=p.activeSprite.gridX&&1550<o.x+o.width&&(o.x-=te),"road"===e?(p.activeSprite=p.activeSprite===B?q:B,A(t)):"box"===e?(re&&U.playAllNoneTransform(W.move_block_sound),p.activeSprite=p.activeSprite===d?D:d,A(t),S[0].type="road",i.type="box",S[1].x+=te,S[1].gridX+=1):"bananas"===e?(p.activeSprite=p.activeSprite===d?D:d,--p.bananasToEat,A(t),S[0].type="road",y[0].type="forest",(i=y[1]).scaleX=i.scaleY=ie.scaleFactor(),i.pivotX=i.pivotY=.5,i.x-=i.width/2-ie.boxSize/2,i.y-=i.height/2-ie.boxSize/2,R.tweenProperty(i,"rotation",i.rotation,-2*Math.PI,60,["spline",10,10],!1,0),re&&ae.play(),(i=S[1]).x+=te,i.scaleX=i.scaleY=ie.scaleFactor(),i.pivotX=i.pivotY=.5,i.x-=i.width/2-ie.boxSize/2,i.y-=i.height/2-ie.boxSize/2,r=R.tweenProperty(i,"rotation",i.rotation,Math.PI,60,["spline",10,10],!1,0),R.tweenProperty(i,"scaleY",i.scaleY,i.scaleY+.02,60,["spline",100,1],!1,0),R.tweenProperty(i,"scaleX",i.scaleX,i.scaleX+.02,60,["spline",100,1],!1,0),r.onComplete=()=>{o.remove(S[1]),o.remove(y[0]),o.remove(y[1])}):"2boxes"===e?(p.activeSprite=p.activeSprite===d?D:d,A(t),S[0].type="road",S[1].x+=te,S[1].gridX+=1,y[1].x+=te,y[1].gridX+=1,g[0].type="box"):"2boxesbananas"===e?(p.activeSprite=p.activeSprite===d?D:d,--p.bananasToEat,A(t),S[0].type="road",S[1].x+=te,S[1].gridX+=1,g[0].type="forest",(i=g[1]).scaleX=i.scaleY=ie.scaleFactor(),i.pivotX=i.pivotY=.5,i.x-=i.width/2-ie.boxSize/2,i.y-=i.height/2-ie.boxSize/2,R.tweenProperty(i,"rotation",i.rotation,-2*Math.PI,60,["spline",10,10],!1,0),re&&ae.play(),(r=y[1]).x+=te,r.scaleX=r.scaleY=ie.scaleFactor(),r.pivotX=r.pivotY=.5,r.x-=r.width/2-ie.boxSize/2,r.y-=r.height/2-ie.boxSize/2,e=R.tweenProperty(r,"rotation",r.rotation,Math.PI,60,["spline",10,10],!1,0),R.tweenProperty(r,"scaleY",r.scaleY,r.scaleY+.02,60,["spline",100,1],!1,0),R.tweenProperty(r,"scaleX",r.scaleX,r.scaleX+.02,60,["spline",100,1],!1,0),e.onComplete=()=>{o.remove(y[1]),o.remove(g[0]),o.remove(g[1])}):N()}function E(e,t,i){var r;1<Z&&p.activeSprite.gridX<=ee-6&&o.x<-32&&(o.x+=te),"road"===e?(p.activeSprite=p.activeSprite===H?G:H,A(t)):"box"===e?(re&&U.playAllNoneTransform(W.move_block_sound),p.activeSprite=p.activeSprite===l?J:l,A(t),b[0].type="road",i.type="box",b[1].x-=te,--b[1].gridX):"bananas"===e?(p.activeSprite=p.activeSprite===l?J:l,--p.bananasToEat,A(t),b[0].type="road",x[0].type="forest",(i=x[1]).scaleX=i.scaleY=ie.scaleFactor(),i.pivotX=i.pivotY=.5,i.x-=i.width/2-ie.boxSize/2,i.y-=i.height/2-ie.boxSize/2,R.tweenProperty(i,"rotation",i.rotation,-2*Math.PI,60,["spline",10,10],!1,0),re&&ae.play(),(i=b[1]).x-=te,i.scaleX=i.scaleY=ie.scaleFactor(),i.pivotX=i.pivotY=.5,i.x-=i.width/2-ie.boxSize/2,i.y-=i.height/2-ie.boxSize/2,r=R.tweenProperty(i,"rotation",i.rotation,Math.PI,60,["spline",10,10],!1,0),R.tweenProperty(i,"scaleY",i.scaleY,i.scaleY+.02,60,["spline",100,1],!1,0),R.tweenProperty(i,"scaleX",i.scaleX,i.scaleX+.02,60,["spline",100,1],!1,0),r.onComplete=()=>{o.remove(b[1]),o.remove(x[0]),o.remove(x[1])}):"2boxes"===e?(p.activeSprite=p.activeSprite===l?J:l,A(t),b[0].type="road",b[1].x-=te,--b[1].gridX,x[1].x-=te,--x[1].gridX,X[0].type="box"):"2boxesbananas"===e?(p.activeSprite=p.activeSprite===l?J:l,--p.bananasToEat,A(t),b[0].type="road",b[1].x-=te,--b[1].gridX,X[0].type="forest",(i=X[1]).scaleX=i.scaleY=ie.scaleFactor(),i.pivotX=i.pivotY=.5,i.x-=i.width/2-ie.boxSize/2,i.y-=i.height/2-ie.boxSize/2,R.tweenProperty(i,"rotation",i.rotation,-2*Math.PI,60,["spline",10,10],!1,0),re&&ae.play(),(r=x[1]).x-=te,r.scaleX=r.scaleY=ie.scaleFactor(),r.pivotX=r.pivotY=.5,r.x-=r.width/2-ie.boxSize/2,r.y-=r.height/2-ie.boxSize/2,e=R.tweenProperty(r,"rotation",r.rotation,Math.PI,60,["spline",10,10],!1,0),R.tweenProperty(r,"scaleY",r.scaleY,r.scaleY+.02,60,["spline",100,1],!1,0),R.tweenProperty(r,"scaleX",r.scaleX,r.scaleX+.02,60,["spline",100,1],!1,0),e.onComplete=()=>{o.remove(x[1]),o.remove(X[0]),o.remove(X[1])}):N()}function _(e,t,i){var r;1<Z&&p.activeSprite.gridY<=ee-6&&o.y<-32&&(o.y+=te),"road"===e?(p.activeSprite=p.activeSprite===j?V:j,A(t)):"box"===e?(re&&U.playAllNoneTransform(W.move_block_sound),p.activeSprite=p.activeSprite===n?c:n,A(t),h[0].type="road",i.type="box",h[1].y-=te,--h[1].gridY):"bananas"===e?(p.activeSprite=p.activeSprite===n?c:n,--p.bananasToEat,A(t),h[0].type="road",w[0].type="forest",(i=w[1]).scaleX=i.scaleY=ie.scaleFactor(),i.pivotX=i.pivotY=.5,i.x-=i.width/2-ie.boxSize/2,i.y-=i.height/2-ie.boxSize/2,R.tweenProperty(i,"rotation",i.rotation,-2*Math.PI,60,["spline",10,10],!1,0),re&&ae.play(),(i=h[1]).y-=te,i.scaleX=i.scaleY=ie.scaleFactor(),i.pivotX=i.pivotY=.5,i.x-=i.width/2-ie.boxSize/2,i.y-=i.height/2-ie.boxSize/2,r=R.tweenProperty(i,"rotation",i.rotation,Math.PI,60,["spline",10,10],!1,0),R.tweenProperty(i,"scaleY",i.scaleY,i.scaleY+.02,60,["spline",100,1],!1,0),R.tweenProperty(i,"scaleX",i.scaleX,i.scaleX+.02,60,["spline",100,1],!1,0),r.onComplete=()=>{o.remove(h[1]),o.remove(w[0]),o.remove(w[1])}):"2boxes"===e?(p.activeSprite=p.activeSprite===n?c:n,A(t),h[0].type="road",h[1].y-=te,--h[1].gridY,w[1].y-=te,--w[1].gridY,f[0].type="box"):"2boxesbananas"===e?(p.activeSprite=p.activeSprite===n?c:n,--p.bananasToEat,A(t),h[0].type="road",h[1].y-=te,--h[1].gridY,f[0].type="forest",(i=f[1]).scaleX=i.scaleY=ie.scaleFactor(),i.pivotX=i.pivotY=.5,i.x-=i.width/2-ie.boxSize/2,i.y-=i.height/2-ie.boxSize/2,R.tweenProperty(i,"rotation",i.rotation,-2*Math.PI,60,["spline",10,10],!1,0),re&&ae.play(),(r=w[1]).y-=te,r.scaleX=r.scaleY=ie.scaleFactor(),r.pivotX=r.pivotY=.5,r.x-=r.width/2-ie.boxSize/2,r.y-=r.height/2-ie.boxSize/2,e=R.tweenProperty(r,"rotation",r.rotation,Math.PI,60,["spline",10,10],!1,0),R.tweenProperty(r,"scaleY",r.scaleY,r.scaleY+.02,60,["spline",100,1],!1,0),R.tweenProperty(r,"scaleX",r.scaleX,r.scaleX+.02,60,["spline",100,1],!1,0),e.onComplete=()=>{o.remove(w[1]),o.remove(f[0]),o.remove(f[1])}):N()}function C(e,t,i){var r;1<Z&&5<=p.activeSprite.gridY&&1550<o.y+o.height&&(o.y-=te),"road"===e?(p.activeSprite=p.activeSprite===$?k:$,A(t)):"box"===e?(re&&U.playAllNoneTransform(W.move_block_sound),p.activeSprite=p.activeSprite===v?s:v,A(t),z[0].type="road",i.type="box",z[1].y+=te,z[1].gridY+=1):"bananas"===e?(p.activeSprite=p.activeSprite===v?s:v,--p.bananasToEat,A(t),z[0].type="road",u[0].type="forest",(i=u[1]).scaleX=i.scaleY=ie.scaleFactor(),i.pivotX=i.pivotY=.5,i.x-=i.width/2-ie.boxSize/2,i.y-=i.height/2-ie.boxSize/2,R.tweenProperty(i,"rotation",i.rotation,-2*Math.PI,60,["spline",10,10],!1,0),re&&ae.play(),(i=z[1]).y+=te,i.scaleX=i.scaleY=ie.scaleFactor(),i.pivotX=i.pivotY=.5,i.x-=i.width/2-ie.boxSize/2,i.y-=i.height/2-ie.boxSize/2,r=R.tweenProperty(i,"rotation",i.rotation,Math.PI,60,["spline",10,10],!1,0),R.tweenProperty(i,"scaleY",i.scaleY,i.scaleY+.02,60,["spline",100,1],!1,0),R.tweenProperty(i,"scaleX",i.scaleX,i.scaleX+.02,60,["spline",100,1],!1,0),r.onComplete=()=>{o.remove(z[1]),o.remove(u[0]),o.remove(u[1])}):"2boxes"===e?(p.activeSprite=p.activeSprite===v?s:v,A(t),z[0].type="road",z[1].y+=te,z[1].gridY+=1,u[1].y+=te,u[1].gridY+=1,F[0].type="box"):"2boxesbananas"===e?(p.activeSprite=p.activeSprite===v?s:v,--p.bananasToEat,A(t),z[0].type="road",z[1].y+=te,z[1].gridY+=1,F[0].type="forest",(i=F[1]).scaleX=i.scaleY=ie.scaleFactor(),i.pivotX=i.pivotY=.5,i.x-=i.width/2-ie.boxSize/2,i.y-=i.height/2-ie.boxSize/2,R.tweenProperty(i,"rotation",i.rotation,-2*Math.PI,60,["spline",10,10],!1,0),re&&ae.play(),(r=u[1]).y+=te,r.scaleX=r.scaleY=ie.scaleFactor(),r.pivotX=r.pivotY=.5,r.x-=r.width/2-ie.boxSize/2,r.y-=r.height/2-ie.boxSize/2,e=R.tweenProperty(r,"rotation",r.rotation,Math.PI,60,["spline",10,10],!1,0),R.tweenProperty(r,"scaleY",r.scaleY,r.scaleY+.02,60,["spline",100,1],!1,0),R.tweenProperty(r,"scaleX",r.scaleX,r.scaleX+.02,60,["spline",100,1],!1,0),e.onComplete=()=>{o.remove(u[1]),o.remove(F[0]),o.remove(F[1])}):N()}function A(e){p.activeSprite.x=e.x,p.activeSprite.y=e.y,p.activeSprite.gridX=e.gridX,p.activeSprite.gridY=e.gridY,p.activeSprite.visible=!0,p.setVisible()}function N(){var e,t,i,r;re&&U.playAllNoneTransform(W.wall_sound),"right"===a?(p.activeSprite===d?(e=p.activeSprite.x,t=p.activeSprite.y,i=p.activeSprite.gridX,r=p.activeSprite.gridY,p.activeSprite=D,p.activeSprite.x=e,p.activeSprite.y=t,p.activeSprite.gridX=i,p.activeSprite.gridY=r):(e=p.activeSprite.x,t=p.activeSprite.y,i=p.activeSprite.gridX,r=p.activeSprite.gridY,p.activeSprite=d,p.activeSprite.x=e,p.activeSprite.y=t,p.activeSprite.gridX=i,p.activeSprite.gridY=r),p.activeSprite.visible=!0,p.setVisible()):"left"===a?(p.activeSprite===l?(e=p.activeSprite.x,t=p.activeSprite.y,i=p.activeSprite.gridX,r=p.activeSprite.gridY,p.activeSprite=J,p.activeSprite.x=e,p.activeSprite.y=t,p.activeSprite.gridX=i,p.activeSprite.gridY=r):(e=p.activeSprite.x,t=p.activeSprite.y,i=p.activeSprite.gridX,r=p.activeSprite.gridY,p.activeSprite=l,p.activeSprite.x=e,p.activeSprite.y=t,p.activeSprite.gridX=i,p.activeSprite.gridY=r),p.activeSprite.visible=!0,p.setVisible()):"up"===a?(p.activeSprite===n?(e=p.activeSprite.x,t=p.activeSprite.y,i=p.activeSprite.gridX,r=p.activeSprite.gridY,p.activeSprite=c,p.activeSprite.x=e,p.activeSprite.y=t,p.activeSprite.gridX=i,p.activeSprite.gridY=r):(e=p.activeSprite.x,t=p.activeSprite.y,i=p.activeSprite.gridX,r=p.activeSprite.gridY,p.activeSprite=n,p.activeSprite.x=e,p.activeSprite.y=t,p.activeSprite.gridX=i,p.activeSprite.gridY=r),p.activeSprite.visible=!0,p.setVisible()):"down"===a&&(p.activeSprite===v?(e=p.activeSprite.x,t=p.activeSprite.y,i=p.activeSprite.gridX,r=p.activeSprite.gridY,p.activeSprite=s,p.activeSprite.x=e,p.activeSprite.y=t,p.activeSprite.gridX=i,p.activeSprite.gridY=r):(e=p.activeSprite.x,t=p.activeSprite.y,i=p.activeSprite.gridX,r=p.activeSprite.gridY,p.activeSprite=v,p.activeSprite.x=e,p.activeSprite.y=t,p.activeSprite.gridX=i,p.activeSprite.gridY=r),p.activeSprite.visible=!0,p.setVisible())}}export{Z as scene,ee as gridDimension,te as stepWidth,ie as standard,e as setScene,t as setSound,i as setSoundEffect,r as moveScene};