import*as R from"./tweens.js";import*as U from"./sounds.js";import*as W from"./gamesounds.js";import"./typedef.js";let Z=void 0,ee=void 0,te=void 0,ie=void 0,ae=!1;function e(e,t){if(Z=e,te=t.boxSize,ie=t,1===Z)ee=12;else if(2===Z)ee=14;else{if(3!==Z)throw new Error(`This data: ${Z} is not allowed for scene.`);ee=16}}function t(e){ae=e}function i(r,o,p,e){let V,j,c,n,$,k,s,v,q,B,D,d,G,H,J,l;V=e[0],j=e[1],c=e[2],n=e[3],$=e[4],k=e[5],s=e[6],v=e[7],q=e[8],B=e[9],D=e[10],d=e[11],G=e[12],H=e[13],J=e[14],l=e[15];let S,y,g,t,i,K,b,x,X,a,Y,L,h,f,w,m,P,O,z,T,F,I,M,Q;if(Z&&1===Z)"right"===r?(S=o.children.filter(e=>e.gridX===p.activeSprite.gridX+1&&e.gridY===p.activeSprite.gridY),y=o.children.filter(e=>e.gridX===p.activeSprite.gridX+2&&e.gridY===p.activeSprite.gridY),t=S[0],i=y[0],t?"road"===t.type||"bananas"===t.type?u("road",t,i):"box"===t.type&&i&&"road"===i.type?u("box",t,i):"box"===t.type&&i&&"bananas"===i.type?u("bananas",t,i):_():_()):"left"===r?(b=o.children.filter(e=>e.gridX===p.activeSprite.gridX-1&&e.gridY===p.activeSprite.gridY),x=o.children.filter(e=>e.gridX===p.activeSprite.gridX-2&&e.gridY===p.activeSprite.gridY),a=b[0],Y=x[0],a?"road"===a.type||"bananas"===a.type?E("road",a,Y):"box"===a.type&&Y&&"road"===Y.type?E("box",a,Y):"box"===a.type&&Y&&"bananas"===Y.type?E("bananas",a,Y):_():_()):"up"===r?(h=o.children.filter(e=>e.gridX===p.activeSprite.gridX&&e.gridY===p.activeSprite.gridY-1),f=o.children.filter(e=>e.gridX===p.activeSprite.gridX&&e.gridY===p.activeSprite.gridY-2),m=h[0],P=f[0],m?"road"===m.type||"bananas"===m.type?A("road",m,P):"box"===m.type&&P&&"road"===P.type?A("box",m,P):"box"===m.type&&P&&"bananas"===P.type?A("bananas",m,P):_():_()):"down"===r&&(z=o.children.filter(e=>e.gridX===p.activeSprite.gridX&&e.gridY===p.activeSprite.gridY+1),T=o.children.filter(e=>e.gridX===p.activeSprite.gridX&&e.gridY===p.activeSprite.gridY+2),I=z[0],M=T[0],I?"road"===I.type||"bananas"===I.type?C("road",I,M):"box"===I.type&&M&&"road"===M.type?C("box",I,M):"box"===I.type&&M&&"bananas"===M.type?C("bananas",I,M):_():_());else{if(!(Z&&1<Z))throw new Error("The scene is not define properly =>>> "+Z);"right"===r?(S=o.children.filter(e=>e.gridX===p.activeSprite.gridX+1&&e.gridY===p.activeSprite.gridY),y=o.children.filter(e=>e.gridX===p.activeSprite.gridX+2&&e.gridY===p.activeSprite.gridY),g=o.children.filter(e=>e.gridX===p.activeSprite.gridX+3&&e.gridY===p.activeSprite.gridY),t=S[0],i=y[0],K=g[0],t?"road"===t.type||"bananas"===t.type?u("road",t,i):"box"===t.type&&i?"road"===i.type?u("box",t,i):"bananas"===i.type?u("bananas",t,i):"box"===i.type&&K?"road"===K.type?u("2boxes",t,i):"bananas"===K.type?u("2boxesbananas",t,i):_():_():_():_()):"left"===r?(b=o.children.filter(e=>e.gridX===p.activeSprite.gridX-1&&e.gridY===p.activeSprite.gridY),x=o.children.filter(e=>e.gridX===p.activeSprite.gridX-2&&e.gridY===p.activeSprite.gridY),X=o.children.filter(e=>e.gridX===p.activeSprite.gridX-3&&e.gridY===p.activeSprite.gridY),a=b[0],Y=x[0],L=X[0],a?"road"===a.type||"bananas"===a.type?E("road",a,Y):"box"===a.type&&Y?"road"===Y.type?E("box",a,Y):"bananas"===Y.type?E("bananas",a,Y):"box"===Y.type&&L?"road"===L.type?E("2boxes",a,Y):"bananas"===L.type?E("2boxesbananas",a,Y):_():_():_():_()):"up"===r?(h=o.children.filter(e=>e.gridX===p.activeSprite.gridX&&e.gridY===p.activeSprite.gridY-1),f=o.children.filter(e=>e.gridX===p.activeSprite.gridX&&e.gridY===p.activeSprite.gridY-2),w=o.children.filter(e=>e.gridX===p.activeSprite.gridX&&e.gridY===p.activeSprite.gridY-3),m=h[0],P=f[0],O=w[0],m?"road"===m.type||"bananas"===m.type?A("road",m,P):"box"===m.type&&P?"road"===P.type?A("box",m,P):"bananas"===P.type?A("bananas",m,P):"box"===P.type&&O?"road"===O.type?A("2boxes",m,P):"bananas"===O.type?A("2boxesbananas",m,P):_():_():_():_()):"down"===r&&(z=o.children.filter(e=>e.gridX===p.activeSprite.gridX&&e.gridY===p.activeSprite.gridY+1),T=o.children.filter(e=>e.gridX===p.activeSprite.gridX&&e.gridY===p.activeSprite.gridY+2),F=o.children.filter(e=>e.gridX===p.activeSprite.gridX&&e.gridY===p.activeSprite.gridY+3),I=z[0],M=T[0],Q=F[0],I?"road"===I.type||"bananas"===I.type?C("road",I,M):"box"===I.type&&M?"road"===M.type?C("box",I,M):"bananas"===M.type?C("bananas",I,M):"box"===M.type&&Q?"road"===Q.type?C("2boxes",I,M):"bananas"===Q.type?C("2boxesbananas",I,M):_():_():_():_())}function u(e,t,i){var a;1<Z&&5<=p.activeSprite.gridX&&1550<o.x+o.width&&(o.x-=te),"road"===e?(p.activeSprite=p.activeSprite===B?q:B,N(t)):"box"===e?(p.activeSprite=p.activeSprite===d?D:d,N(t),S[0].type="road",i.type="box",S[1].x+=te,S[1].gridX+=1):"bananas"===e?(p.activeSprite=p.activeSprite===d?D:d,--p.bananasToEat,N(t),S[0].type="road",y[0].type="forest",(i=y[1]).scaleX=i.scaleY=ie.scaleFactor(),i.pivotX=i.pivotY=.5,i.x-=i.width/2-ie.boxSize/2,i.y-=i.height/2-ie.boxSize/2,R.tweenProperty(i,"rotation",i.rotation,-2*Math.PI,60,["spline",10,10],!1,0),ae&&U.playAllNonTransform(W.eat_bananas),(i=S[1]).x+=te,i.scaleX=i.scaleY=ie.scaleFactor(),i.pivotX=i.pivotY=.5,i.x-=i.width/2-ie.boxSize/2,i.y-=i.height/2-ie.boxSize/2,a=R.tweenProperty(i,"rotation",i.rotation,Math.PI,60,["spline",10,10],!1,0),R.tweenProperty(i,"scaleY",i.scaleY,i.scaleY+.02,60,["spline",100,1],!1,0),R.tweenProperty(i,"scaleX",i.scaleX,i.scaleX+.02,60,["spline",100,1],!1,0),a.onComplete=()=>{o.remove(S[1]),o.remove(y[0]),o.remove(y[1])}):"2boxes"===e?(p.activeSprite=p.activeSprite===d?D:d,N(t),S[0].type="road",S[1].x+=te,S[1].gridX+=1,y[1].x+=te,y[1].gridX+=1,g[0].type="box"):"2boxesbananas"===e?(p.activeSprite=p.activeSprite===d?D:d,--p.bananasToEat,N(t),S[0].type="road",S[1].x+=te,S[1].gridX+=1,g[0].type="forest",(i=g[1]).scaleX=i.scaleY=ie.scaleFactor(),i.pivotX=i.pivotY=.5,i.x-=i.width/2-ie.boxSize/2,i.y-=i.height/2-ie.boxSize/2,R.tweenProperty(i,"rotation",i.rotation,-2*Math.PI,60,["spline",10,10],!1,0),ae&&U.playAllNonTransform(W.eat_bananas),(a=y[1]).x+=te,a.scaleX=a.scaleY=ie.scaleFactor(),a.pivotX=a.pivotY=.5,a.x-=a.width/2-ie.boxSize/2,a.y-=a.height/2-ie.boxSize/2,e=R.tweenProperty(a,"rotation",a.rotation,Math.PI,60,["spline",10,10],!1,0),R.tweenProperty(a,"scaleY",a.scaleY,a.scaleY+.02,60,["spline",100,1],!1,0),R.tweenProperty(a,"scaleX",a.scaleX,a.scaleX+.02,60,["spline",100,1],!1,0),e.onComplete=()=>{o.remove(y[1]),o.remove(g[0]),o.remove(g[1])}):_()}function E(e,t,i){var a;1<Z&&p.activeSprite.gridX<=ee-6&&o.x<-32&&(o.x+=te),"road"===e?(p.activeSprite=p.activeSprite===H?G:H,N(t)):"box"===e?(p.activeSprite=p.activeSprite===l?J:l,N(t),b[0].type="road",i.type="box",b[1].x-=te,--b[1].gridX):"bananas"===e?(p.activeSprite=p.activeSprite===l?J:l,--p.bananasToEat,N(t),b[0].type="road",x[0].type="forest",(i=x[1]).scaleX=i.scaleY=ie.scaleFactor(),i.pivotX=i.pivotY=.5,i.x-=i.width/2-ie.boxSize/2,i.y-=i.height/2-ie.boxSize/2,R.tweenProperty(i,"rotation",i.rotation,-2*Math.PI,60,["spline",10,10],!1,0),ae&&U.playAllNonTransform(W.eat_bananas),(i=b[1]).x-=te,i.scaleX=i.scaleY=ie.scaleFactor(),i.pivotX=i.pivotY=.5,i.x-=i.width/2-ie.boxSize/2,i.y-=i.height/2-ie.boxSize/2,a=R.tweenProperty(i,"rotation",i.rotation,Math.PI,60,["spline",10,10],!1,0),R.tweenProperty(i,"scaleY",i.scaleY,i.scaleY+.02,60,["spline",100,1],!1,0),R.tweenProperty(i,"scaleX",i.scaleX,i.scaleX+.02,60,["spline",100,1],!1,0),a.onComplete=()=>{o.remove(b[1]),o.remove(x[0]),o.remove(x[1])}):"2boxes"===e?(p.activeSprite=p.activeSprite===l?J:l,N(t),b[0].type="road",b[1].x-=te,--b[1].gridX,x[1].x-=te,--x[1].gridX,X[0].type="box"):"2boxesbananas"===e?(p.activeSprite=p.activeSprite===l?J:l,--p.bananasToEat,N(t),b[0].type="road",b[1].x-=te,--b[1].gridX,X[0].type="forest",(i=X[1]).scaleX=i.scaleY=ie.scaleFactor(),i.pivotX=i.pivotY=.5,i.x-=i.width/2-ie.boxSize/2,i.y-=i.height/2-ie.boxSize/2,R.tweenProperty(i,"rotation",i.rotation,-2*Math.PI,60,["spline",10,10],!1,0),ae&&U.playAllNonTransform(W.eat_bananas),(a=x[1]).x-=te,a.scaleX=a.scaleY=ie.scaleFactor(),a.pivotX=a.pivotY=.5,a.x-=a.width/2-ie.boxSize/2,a.y-=a.height/2-ie.boxSize/2,e=R.tweenProperty(a,"rotation",a.rotation,Math.PI,60,["spline",10,10],!1,0),R.tweenProperty(a,"scaleY",a.scaleY,a.scaleY+.02,60,["spline",100,1],!1,0),R.tweenProperty(a,"scaleX",a.scaleX,a.scaleX+.02,60,["spline",100,1],!1,0),e.onComplete=()=>{o.remove(x[1]),o.remove(X[0]),o.remove(X[1])}):_()}function A(e,t,i){var a;1<Z&&p.activeSprite.gridY<=ee-6&&o.y<-32&&(o.y+=te),"road"===e?(p.activeSprite=p.activeSprite===j?V:j,N(t)):"box"===e?(p.activeSprite=p.activeSprite===n?c:n,N(t),h[0].type="road",i.type="box",h[1].y-=te,--h[1].gridY):"bananas"===e?(p.activeSprite=p.activeSprite===n?c:n,--p.bananasToEat,N(t),h[0].type="road",f[0].type="forest",(i=f[1]).scaleX=i.scaleY=ie.scaleFactor(),i.pivotX=i.pivotY=.5,i.x-=i.width/2-ie.boxSize/2,i.y-=i.height/2-ie.boxSize/2,R.tweenProperty(i,"rotation",i.rotation,-2*Math.PI,60,["spline",10,10],!1,0),ae&&U.playAllNonTransform(W.eat_bananas),(i=h[1]).y-=te,i.scaleX=i.scaleY=ie.scaleFactor(),i.pivotX=i.pivotY=.5,i.x-=i.width/2-ie.boxSize/2,i.y-=i.height/2-ie.boxSize/2,a=R.tweenProperty(i,"rotation",i.rotation,Math.PI,60,["spline",10,10],!1,0),R.tweenProperty(i,"scaleY",i.scaleY,i.scaleY+.02,60,["spline",100,1],!1,0),R.tweenProperty(i,"scaleX",i.scaleX,i.scaleX+.02,60,["spline",100,1],!1,0),a.onComplete=()=>{o.remove(h[1]),o.remove(f[0]),o.remove(f[1])}):"2boxes"===e?(p.activeSprite=p.activeSprite===n?c:n,N(t),h[0].type="road",h[1].y-=te,--h[1].gridY,f[1].y-=te,--f[1].gridY,w[0].type="box"):"2boxesbananas"===e?(p.activeSprite=p.activeSprite===n?c:n,--p.bananasToEat,N(t),h[0].type="road",h[1].y-=te,--h[1].gridY,w[0].type="forest",(i=w[1]).scaleX=i.scaleY=ie.scaleFactor(),i.pivotX=i.pivotY=.5,i.x-=i.width/2-ie.boxSize/2,i.y-=i.height/2-ie.boxSize/2,R.tweenProperty(i,"rotation",i.rotation,-2*Math.PI,60,["spline",10,10],!1,0),ae&&U.playAllNonTransform(W.eat_bananas),(a=f[1]).y-=te,a.scaleX=a.scaleY=ie.scaleFactor(),a.pivotX=a.pivotY=.5,a.x-=a.width/2-ie.boxSize/2,a.y-=a.height/2-ie.boxSize/2,e=R.tweenProperty(a,"rotation",a.rotation,Math.PI,60,["spline",10,10],!1,0),R.tweenProperty(a,"scaleY",a.scaleY,a.scaleY+.02,60,["spline",100,1],!1,0),R.tweenProperty(a,"scaleX",a.scaleX,a.scaleX+.02,60,["spline",100,1],!1,0),e.onComplete=()=>{o.remove(f[1]),o.remove(w[0]),o.remove(w[1])}):_()}function C(e,t,i){var a;1<Z&&5<=p.activeSprite.gridY&&1550<o.y+o.height&&(o.y-=te),"road"===e?(p.activeSprite=p.activeSprite===k?$:k,N(t)):"box"===e?(p.activeSprite=p.activeSprite===v?s:v,N(t),z[0].type="road",i.type="box",z[1].y+=te,z[1].gridY+=1):"bananas"===e?(p.activeSprite=p.activeSprite===v?s:v,--p.bananasToEat,N(t),z[0].type="road",T[0].type="forest",(i=T[1]).scaleX=i.scaleY=ie.scaleFactor(),i.pivotX=i.pivotY=.5,i.x-=i.width/2-ie.boxSize/2,i.y-=i.height/2-ie.boxSize/2,R.tweenProperty(i,"rotation",i.rotation,-2*Math.PI,60,["spline",10,10],!1,0),ae&&U.playAllNonTransform(W.eat_bananas),(i=z[1]).y+=te,i.scaleX=i.scaleY=ie.scaleFactor(),i.pivotX=i.pivotY=.5,i.x-=i.width/2-ie.boxSize/2,i.y-=i.height/2-ie.boxSize/2,a=R.tweenProperty(i,"rotation",i.rotation,Math.PI,60,["spline",10,10],!1,0),R.tweenProperty(i,"scaleY",i.scaleY,i.scaleY+.02,60,["spline",100,1],!1,0),R.tweenProperty(i,"scaleX",i.scaleX,i.scaleX+.02,60,["spline",100,1],!1,0),a.onComplete=()=>{o.remove(z[1]),o.remove(T[0]),o.remove(T[1])}):"2boxes"===e?(p.activeSprite=p.activeSprite===v?s:v,N(t),z[0].type="road",z[1].y+=te,z[1].gridY+=1,T[1].y+=te,T[1].gridY+=1,F[0].type="box"):"2boxesbananas"===e?(p.activeSprite=p.activeSprite===v?s:v,--p.bananasToEat,N(t),z[0].type="road",z[1].y+=te,z[1].gridY+=1,F[0].type="forest",(i=F[1]).scaleX=i.scaleY=ie.scaleFactor(),i.pivotX=i.pivotY=.5,i.x-=i.width/2-ie.boxSize/2,i.y-=i.height/2-ie.boxSize/2,R.tweenProperty(i,"rotation",i.rotation,-2*Math.PI,60,["spline",10,10],!1,0),ae&&U.playAllNonTransform(W.eat_bananas),(a=T[1]).y+=te,a.scaleX=a.scaleY=ie.scaleFactor(),a.pivotX=a.pivotY=.5,a.x-=a.width/2-ie.boxSize/2,a.y-=a.height/2-ie.boxSize/2,e=R.tweenProperty(a,"rotation",a.rotation,Math.PI,60,["spline",10,10],!1,0),R.tweenProperty(a,"scaleY",a.scaleY,a.scaleY+.02,60,["spline",100,1],!1,0),R.tweenProperty(a,"scaleX",a.scaleX,a.scaleX+.02,60,["spline",100,1],!1,0),e.onComplete=()=>{o.remove(T[1]),o.remove(F[0]),o.remove(F[1])}):_()}function N(e){p.activeSprite.x=e.x,p.activeSprite.y=e.y,p.activeSprite.gridX=e.gridX,p.activeSprite.gridY=e.gridY,p.activeSprite.visible=!0,p.setVisible()}function _(){var e,t,i,a;"right"===r?(p.activeSprite===d?(e=p.activeSprite.x,t=p.activeSprite.y,i=p.activeSprite.gridX,a=p.activeSprite.gridY,p.activeSprite=D,p.activeSprite.x=e,p.activeSprite.y=t,p.activeSprite.gridX=i,p.activeSprite.gridY=a):(e=p.activeSprite.x,t=p.activeSprite.y,i=p.activeSprite.gridX,a=p.activeSprite.gridY,p.activeSprite=d,p.activeSprite.x=e,p.activeSprite.y=t,p.activeSprite.gridX=i,p.activeSprite.gridY=a),p.activeSprite.visible=!0,p.setVisible()):"left"===r?(p.activeSprite===l?(e=p.activeSprite.x,t=p.activeSprite.y,i=p.activeSprite.gridX,a=p.activeSprite.gridY,p.activeSprite=J,p.activeSprite.x=e,p.activeSprite.y=t,p.activeSprite.gridX=i,p.activeSprite.gridY=a):(e=p.activeSprite.x,t=p.activeSprite.y,i=p.activeSprite.gridX,a=p.activeSprite.gridY,p.activeSprite=l,p.activeSprite.x=e,p.activeSprite.y=t,p.activeSprite.gridX=i,p.activeSprite.gridY=a),p.activeSprite.visible=!0,p.setVisible()):"up"===r?(p.activeSprite===n?(e=p.activeSprite.x,t=p.activeSprite.y,i=p.activeSprite.gridX,a=p.activeSprite.gridY,p.activeSprite=c,p.activeSprite.x=e,p.activeSprite.y=t,p.activeSprite.gridX=i,p.activeSprite.gridY=a):(e=p.activeSprite.x,t=p.activeSprite.y,i=p.activeSprite.gridX,a=p.activeSprite.gridY,p.activeSprite=n,p.activeSprite.x=e,p.activeSprite.y=t,p.activeSprite.gridX=i,p.activeSprite.gridY=a),p.activeSprite.visible=!0,p.setVisible()):"down"===r&&(p.activeSprite===v?(e=p.activeSprite.x,t=p.activeSprite.y,i=p.activeSprite.gridX,a=p.activeSprite.gridY,p.activeSprite=s,p.activeSprite.x=e,p.activeSprite.y=t,p.activeSprite.gridX=i,p.activeSprite.gridY=a):(e=p.activeSprite.x,t=p.activeSprite.y,i=p.activeSprite.gridX,a=p.activeSprite.gridY,p.activeSprite=v,p.activeSprite.x=e,p.activeSprite.y=t,p.activeSprite.gridX=i,p.activeSprite.gridY=a),p.activeSprite.visible=!0,p.setVisible())}}export{Z as scene,ee as gridDimension,te as stepWidth,ie as standard,e as setScene,t as setSound,i as moveScene};